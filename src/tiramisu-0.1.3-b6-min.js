(function(b){function a(){this.version="0.1.3-b6";this.d=document;this.selector="QSA";this.requestAnimFrame=(function(){return b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||function(e,d){b.setTimeout(e,1000/60)}})()}b.tiramisu=b.t=new a();function c(e,d){for(var f in d){e[f]=d[f]}}a.prototype.detect=function(e){var d=navigator.userAgent,g=navigator.appName;var f={browser:function(){if(g==="Netscape"){var j=d.substring(d.indexOf("Firefox"));if(j.split("/")[0]!=="Firefox"){return"webkit"}else{firefox_version=parseInt(j.split("/")[1].split(".")[0]);if(firefox_version>3.8){return"f4+"}return"f3"}}else{if(g=="Opera"){var h=d.substring(d.indexOf("Version")).split("/")[1];if(h.split(".")[1]>49){return"o10.5+"}return"o10.4"}else{if(/MSIE (\d+\.\d+);/.test(d)){var k=new Number(RegExp.$1);if(k>8){return"ie9+"}else{if(k==8){return"ie8"}}return"ie7"}else{return"other"}}}},isIE:function(){return this.browser()==="ie9+"||this.browser()==="ie8"||this.browser()==="ie7"},isIEolder:function(){return this.browser()==="ie8"||this.browser()==="ie7"},isFirefox:function(){return this.browser()==="f3"||this.browser()==="f4+"},isChrome:function(){return this.browser()==="webkit"},querySelectorAll:function(){return(tiramisu.selector==="QSA"&&typeof tiramisu.d.querySelectorAll!=="undefined")},color:function(){if(this.isIEolder()){return false}return true}};return f[e]()};a.prototype.get=function(x){function n(B,E,z){if(u[0]===undefined){return""}var A,C,F,D;for(A=0;A<p;A++){F=t.d.createElement("div");if(typeof B==="string"){F.innerHTML=B}else{F.innerHTML=B.outerHTML||new XMLSerializer().serializeToString(B)}C=u[A].parentNode;while(D=F.firstChild){if(E){(z)?u[A].insertBefore(D,u[A].firstChild):C.insertBefore(D,u[A])}else{(z)?u[A].appendChild(D):C.insertBefore(D,u[A].nextSibling)}}}}function w(A){var B=[];for(var z=A.length;z--;){B[z]=A[z]}return B}var l={nl:"\n|\r\n|\r|\f",nonascii:"[^\0-\177]",unicode:"\\[0-9A-Fa-f]{1,6}(\r\n|[s\n\r\t\f])?",escape:"#{unicode}|\\[^\n\r\f0-9A-Fa-f]",nmchar:"[_A-Za-z0-9-]|#{nonascii}|#{escape}",nmstart:"[_A-Za-z]|#{nonascii}|#{escape}",ident:"[-@]?(#{nmstart})(#{nmchar})*",name:"(#{nmchar})+"};var m={"id and name":"(#{ident}##{ident})",id:"(##{ident})","class":"(\\.#{ident})","name and class":"(#{ident}\\.#{ident})",element:"(#{ident})","pseudo class":"(:#{ident})"};function v(z){return z.replace(/^\s+|\s+$/g,"").replace(/[ \t\r\n\f]+/g," ")}var g=function(){function A(G,F){var D=true,E;while(D){E=G.match(/#\{([^}]+)\}/);if(E&&E[1]){G=G.replace(new RegExp("#{"+E[1]+"}","g"),F[E[1]]);D=true}else{D=false}}return G}function z(D){return D.replace(/\//g,"//")}function C(){var E,H,D={},F,G;if(arguments.length===2){G=arguments[0];F=arguments[1]}else{G=arguments[0];F=arguments[0]}for(E in F){H=z(A(F[E],G));D[E]=H}return D}function B(D){var F=[],E;for(E in D){F.push(D[E])}return new RegExp(F.join("|"),"g")}return B(C(C(l),m))};var o={byAttr:function(D,B,C){var A,z=[];for(A in D){if(D[A]&&D[A][B]===C){z.push(D[A])}}return z}};var q={byId:function(z,A){return(z)?[z.getElementById(A)]:[]},byNodeName:function(z,D){if(z===null){return[]}var C,B=[],A=z.getElementsByTagName(D);for(C=0;C<A.length;C++){B.push(A[C])}return B},byClassName:function(z,D){if(z===null){return[]}var C,B=[],A=z.getElementsByTagName("*");for(C=0;C<A.length;C++){if(A[C].className.match("\\b"+D+"\\b")){B.push(A[C])}}return B}};var j={id:function(A,z){z=z.split("#")[1];return q.byId(A,z)},"name and id":function(A,z){var C=z.split("#"),B=C[0],D=C[1];return o.byAttr(q.byId(A,D),"nodeName",B.toUpperCase())},name:function(A,z){return q.byNodeName(A,z)},"class":function(A,z){z=z.split(".")[1];return q.byClassName(A,z)},"name and class":function(A,z){var D=z.split("."),B=D[0],C=D[1];return o.byAttr(q.byClassName(A,C),"nodeName",B.toUpperCase())}};var f={id:function(A,z){z=z.split("#")[1];return A&&A.id===z},name:function(z,A){return z.nodeName===A.toUpperCase()},"name and id":function(A,z){return f.id(A,z)&&f.name(A,z.split("#")[0])},"class":function(A,z){if(A&&A.className){z=z.split(".")[1];return A.className.match("\\b"+z+"\\b")}},"name and class":function(A,z){return f["class"](A,z)&&f.name(A,z.split(".")[0])}};function r(z,A){this.identity=z;this.finder=A}r.prototype.toString=function(){return"identity: "+this.identity+", finder: "+this.finder};function h(z){this.selector=v(z);this.tokens=[];this.tokenize()}h.prototype.tokenize=function(){var z,A,B;A=g();A.lastIndex=0;while(z=A.exec(this.selector)){B=null;if(z[10]){B="id"}else{if(z[1]){B="name and id"}else{if(z[15]){B="class"}else{if(z[20]){B="name and class"}else{if(z[29]){B="name"}}}}}this.tokens.push(new r(z[0],B))}return this.tokens};function k(z,A){this.root=z;this.key_selector=A.pop();this.tokens=A;this.results=[]}k.prototype.find=function(z){if(!j[z.finder]){throw new Error("Invalid Finder: "+z.finder)}return j[z.finder](this.root,z.identity)};k.prototype.matchesToken=function(A,z){if(!f[z.finder]){throw new Error("Invalid Matcher: "+z.finder)}return f[z.finder](A,z.identity)};k.prototype.matchesAllRules=function(C){if(this.tokens.length===0){return}var B=this.tokens.length-1,A=this.tokens[B],z=false;while(B>=0&&C){if(this.matchesToken(C,A)){z=true;B--;A=this.tokens[B]}C=C.parentNode}return z&&B<0};k.prototype.parse=function(){var B,A,C=this.find(this.key_selector),z=[];for(B=0;B<C.length;B++){A=C[B];if(this.tokens.length>0){if(this.matchesAllRules(A.parentNode)){z.push(A)}}else{if(this.matchesToken(A,this.key_selector)){z.push(A)}}}return z};var u;if(typeof x==="string"){if(t.detect("querySelectorAll")){u=w(tiramisu.d.querySelectorAll(x))}else{var d=new h(x);a.prototype.tokenize=new h(x);var e=new k(document,d.tokens),u=e.parse()}}else{u=[x]}var p=u.length;var y={each:function(z){var A;for(A=0;A<p;A++){z.apply(u[A])}return this},on:function(A,z){if(u[0]===undefined||arguments.length>2){return""}var D=1,C=[],E=[];if(typeof(A)==="string"){C[0]=A;E[0]=z}else{if(typeof(A)==="object"){if(typeof(A[0])==="string"){C=A;E[0]=z}else{for(key in A){D=C.push(key);E.push(A[key])}}}}for(var B=D;B--;){if(u[0].addEventListener){for(i=p;i--;){u[i].addEventListener(C[B],E[B],false)}}else{if(u[0].attachEvent){for(i=p;i--;){u[i].attachEvent("on"+C[B],E[B])}}}}return this},before:function(z){n(z,true,false);return this},after:function(z){n(z,false,false);return this},append:function(z){n(z,false,true);return this},prepend:function(z){n(z,true,true);return this},css:function(E){var C,B,A=t.detect("browser"),D=t.detect("isIEolder"),F=t.detect("isIE");var z={opacity:function(H,G){if(G!==undefined){if(F){H.style.opacity=G;H.style.filter="alpha(opacity="+G*100+")"}else{H.style.opacity=G}}else{return H.style.opacity}},"border-radius":function(H,G){if(G){if(A==="f3"){H.style.MozBorderRadius=G}}else{if(A==="f3"){return H.style.MozBorderRadius}else{if(A==="ie9+"){return H.style.borderRadius}}}}};if(typeof(E)==="string"){if(F||A==="f3"){if(E=="border-radius"){return z[E](u[0])}return u[0].style[E]}return u[0].style[E]}for(C=p;C--;){for(B in E){if(E.hasOwnProperty(B)){if(F||A==="f3"){if(z[B]!==undefined){z[B](u[C],E[B])}else{u[C].style[B]=E[B]}}else{u[C].style.setProperty(B,E[B],"")}}}}return this},html:function(z){if(z!==undefined){u[0].innerHTML=z}else{return u[0].innerHTML}},value:function(C){var A=function(D){if(t.detect("isIE")||t.detect("isIEolder")){if(u[D].type=="select-one"){return u[D].options[u[D].selectedIndex].value}return u[D].value}return u[D].value};var B=function(D,E){if(t.detect("isIE")||t.detect("isIEolder")){if(u[D].type=="select-one"){u[D].options[u[D].selectedIndex].value=E}u[D].value=E}else{u[D].value=E}};if(u[0]===undefined){return""}if(C!==undefined){B(0,C)}else{if(p>1){var z=[];for(i=0;i<p;i++){z.push(A(i))}return z}return A(0)}},focus:function(){if(u[0]===undefined){return""}for(var z=p;z--;){u[z].focus()}},attr:function(z,A){if(A!==undefined){if(z==="class"){return u[0].className=A}else{return u[0][z]=A}}else{if(z==="class"){return u[0].className}else{return u[0][z]}}},index:function(A){if(A!==undefined){for(var z=p;z>=0;z--){if(u[z]===A){break}}return z}},filter:function(z){if(u[0]===undefined){return""}var B={":odd":function(C){return(C%2!==0)?true:false},":even":function(C){return(C%2===0)?true:false}};if(typeof z==="string"&&typeof B[z]==="function"){for(var A=p;A--;){!B[z](A)&&u.splice(A,1)}}else{if(typeof z==="function"){for(var A=0;A<p;A++){!z(A)&&u.splice(A,1)}}}return this},empty:function(){if(u[0]===undefined){return""}for(var z=0;z<p;z++){var B=u[z].childNodes[0];while(B){var A=B.nextSibling;u[z].removeChild(B);B=A}}},destroy:function(C){if(u[0]===undefined){return""}if(C!==undefined&&typeof C==="string"){var B=t.get(x+" "+C),z=B.length;for(var A=z;A--;){parent=B[A].parentNode;parent.removeChild(B[A])}}else{for(A=p;A--;){parent=u[A].parentNode;parent.removeChild(u[A])}}}};(function s(){var z;for(z in y){u[z]=y[z]}})();return u};a.prototype.ajax=function(j){var j=j||{},g={async:true,content_type:"",connection:"",data_type:"",error:function(m){try{console.log(m)}catch(n){}},start_load:function(){},end_load:function(){},loader:"",method:"GET",parameter:"",success:function(){},successHTML:"",stop:"",url:""},k=null,l="",f=0,e="",h="";if(b.XMLHttpRequest){k=new XMLHttpRequest()}else{if(b.ActiveXObject){k=new ActiveXObject("Microsoft.XMLHTTP")}else{g.error("e_ajax#1")}}c(g,j);if(g.parameter!=""){for(attrname in g.parameter){l+=attrname+"="+g.parameter[attrname]+"&"}l=l.substring(0,l.length-1);if(g.method==="POST"){if(!g.content_type){g.content_type="application/x-www-form-urlencoded"}}else{h="?"+l}}else{l=null}if(t.detect("isIE")&&g.method==="POST"){e="?"+((""+Math.random()).replace(/\D/g,""))}k.onreadystatechange=function(){if(k.readyState==4&&k.status==200){if(g.successHTML){if(typeof(g.successHTML)==="string"){t.d.getElementById(g.successHTML).innerHTML=k.responseText}else{if(typeof(g.successHTML)==="object"){if(typeof(g.successHTML.html)==="function"){g.successHTML.html(k.responseText)}else{g.successHTML.innerHTML=k.responseText}}}}g.end_load();g.success(k.responseText)}else{if(k.readyState==4&&k.status==400){g.end_load();g.error("400 Bad Request")}else{if(k.readyState==4&&k.status!=200){g.end_load();g.error("Fetched the wrong page or network error")}}}};k.open(g.method,g.url+h+e,g.async);if(g.content_type){k.setRequestHeader("Content-type",g.content_type)}if(g.connection){k.setRequestHeader("Connection",g.connection)}if(g.data_type){k.setRequestHeader("dataType",g.data_type)}if(g.loader){var d='<img src="'+g.loader+'" alt="" />';t.d.getElementById(g.successHTML).innerHTML=d}k.setRequestHeader("X-Requested-With","XMLHttpRequest");g.start_load();if(g.stop){t.task(g.stop,function(){k.abort()})}k.send(l);return this};a.prototype.task=function(g,d){var f,h=t.requestAnimFrame;if(arguments.length>2){f=arguments[1];d=arguments[2]}var k=+new Date(),j=f;function e(){var l=+new Date()-k;if(f!==undefined){if(l>j){j+=f;d()}}if(l<g||(g=="loop"&&f!==undefined)){h(e)}else{if(f===undefined){d()}}}e()}})(window);