(function(b){function a(){this.version="0.1.3-b6";this.d=document;this.selector="QSA";this.requestAnimFrame=(function(){return b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||function(e,d){b.setTimeout(e,1000/60)}})()}b.tiramisu=b.t=new a();function c(e,d){for(var f in d){e[f]=d[f]}}a.prototype.detect=function(e){var d=navigator.userAgent,g=navigator.appName;var f={browser:function(){if(g==="Netscape"){var j=d.substring(d.indexOf("Firefox"));if(j.split("/")[0]!=="Firefox"){return"webkit"}else{firefox_version=parseInt(j.split("/")[1].split(".")[0]);if(firefox_version>3.8){return"f4+"}return"f3"}}else{if(g=="Opera"){var h=d.substring(d.indexOf("Version")).split("/")[1];if(h.split(".")[1]>49){return"o10.5+"}return"o10.4"}else{if(/MSIE (\d+\.\d+);/.test(d)){var k=new Number(RegExp.$1);if(k>8){return"ie9+"}else{if(k==8){return"ie8"}}return"ie7"}else{return"other"}}}},isIE:function(){return this.browser()==="ie9+"||this.browser()==="ie8"||this.browser()==="ie7"},isIEolder:function(){return this.browser()==="ie8"||this.browser()==="ie7"},isFirefox:function(){return this.browser()==="f3"||this.browser()==="f4+"},isChrome:function(){return this.browser()==="webkit"},querySelectorAll:function(){return(tiramisu.selector==="QSA"&&typeof tiramisu.d.querySelectorAll!=="undefined")},color:function(){if(this.isIEolder()){return false}return true}};return f[e]()};a.prototype.get=function(w){function n(A,D,y){if(u[0]===undefined){return""}var z,B,E,C;for(z=0;z<p;z++){E=t.d.createElement("div");if(typeof A==="string"){E.innerHTML=A}else{E.innerHTML=A.outerHTML||new XMLSerializer().serializeToString(A)}B=u[z].parentNode;while(C=E.firstChild){if(D){(y)?u[z].insertBefore(C,u[z].firstChild):B.insertBefore(C,u[z])}else{(y)?u[z].appendChild(C):B.insertBefore(C,u[z].nextSibling)}}}}var l={nl:"\n|\r\n|\r|\f",nonascii:"[^\0-\177]",unicode:"\\[0-9A-Fa-f]{1,6}(\r\n|[s\n\r\t\f])?",escape:"#{unicode}|\\[^\n\r\f0-9A-Fa-f]",nmchar:"[_A-Za-z0-9-]|#{nonascii}|#{escape}",nmstart:"[_A-Za-z]|#{nonascii}|#{escape}",ident:"[-@]?(#{nmstart})(#{nmchar})*",name:"(#{nmchar})+"};var m={"id and name":"(#{ident}##{ident})",id:"(##{ident})","class":"(\\.#{ident})","name and class":"(#{ident}\\.#{ident})",element:"(#{ident})","pseudo class":"(:#{ident})"};function v(y){return y.replace(/^\s+|\s+$/g,"").replace(/[ \t\r\n\f]+/g," ")}var g=function(){function z(F,E){var C=true,D;while(C){D=F.match(/#\{([^}]+)\}/);if(D&&D[1]){F=F.replace(new RegExp("#{"+D[1]+"}","g"),E[D[1]]);C=true}else{C=false}}return F}function y(C){return C.replace(/\//g,"//")}function B(){var D,G,C={},E,F;if(arguments.length===2){F=arguments[0];E=arguments[1]}else{F=arguments[0];E=arguments[0]}for(D in E){G=y(z(E[D],F));C[D]=G}return C}function A(C){var E=[],D;for(D in C){E.push(C[D])}return new RegExp(E.join("|"),"g")}return A(B(B(l),m))};var o={byAttr:function(C,A,B){var z,y=[];for(z in C){if(C[z]&&C[z][A]===B){y.push(C[z])}}return y}};var q={byId:function(y,z){return(y)?[y.getElementById(z)]:[]},byNodeName:function(y,C){if(y===null){return[]}var B,A=[],z=y.getElementsByTagName(C);for(B=0;B<z.length;B++){A.push(z[B])}return A},byClassName:function(y,C){if(y===null){return[]}var B,A=[],z=y.getElementsByTagName("*");for(B=0;B<z.length;B++){if(z[B].className.match("\\b"+C+"\\b")){A.push(z[B])}}return A}};var j={id:function(z,y){y=y.split("#")[1];return q.byId(z,y)},"name and id":function(z,y){var B=y.split("#"),A=B[0],C=B[1];return o.byAttr(q.byId(z,C),"nodeName",A.toUpperCase())},name:function(z,y){return q.byNodeName(z,y)},"class":function(z,y){y=y.split(".")[1];return q.byClassName(z,y)},"name and class":function(z,y){var C=y.split("."),A=C[0],B=C[1];return o.byAttr(q.byClassName(z,B),"nodeName",A.toUpperCase())}};var f={id:function(z,y){y=y.split("#")[1];return z&&z.id===y},name:function(y,z){return y.nodeName===z.toUpperCase()},"name and id":function(z,y){return f.id(z,y)&&f.name(z,y.split("#")[0])},"class":function(z,y){if(z&&z.className){y=y.split(".")[1];return z.className.match("\\b"+y+"\\b")}},"name and class":function(z,y){return f["class"](z,y)&&f.name(z,y.split(".")[0])}};function r(y,z){this.identity=y;this.finder=z}r.prototype.toString=function(){return"identity: "+this.identity+", finder: "+this.finder};function h(y){this.selector=v(y);this.tokens=[];this.tokenize()}h.prototype.tokenize=function(){var y,z,A;z=g();z.lastIndex=0;while(y=z.exec(this.selector)){A=null;if(y[10]){A="id"}else{if(y[1]){A="name and id"}else{if(y[15]){A="class"}else{if(y[20]){A="name and class"}else{if(y[29]){A="name"}}}}}this.tokens.push(new r(y[0],A))}return this.tokens};function k(y,z){this.root=y;this.key_selector=z.pop();this.tokens=z;this.results=[]}k.prototype.find=function(y){if(!j[y.finder]){throw new Error("Invalid Finder: "+y.finder)}return j[y.finder](this.root,y.identity)};k.prototype.matchesToken=function(z,y){if(!f[y.finder]){throw new Error("Invalid Matcher: "+y.finder)}return f[y.finder](z,y.identity)};k.prototype.matchesAllRules=function(B){if(this.tokens.length===0){return}var A=this.tokens.length-1,z=this.tokens[A],y=false;while(A>=0&&B){if(this.matchesToken(B,z)){y=true;A--;z=this.tokens[A]}B=B.parentNode}return y&&A<0};k.prototype.parse=function(){var A,z,B=this.find(this.key_selector),y=[];for(A=0;A<B.length;A++){z=B[A];if(this.tokens.length>0){if(this.matchesAllRules(z.parentNode)){y.push(z)}}else{if(this.matchesToken(z,this.key_selector)){y.push(z)}}}return y};if(typeof w==="string"){if(t.detect("querySelectorAll")){u=tiramisu.d.querySelectorAll(w)}else{var d=new h(w);a.prototype.tokenize=new h(w);var e=new k(document,d.tokens),u=e.parse()}}else{u=[w]}var p=u.length;var x={each:function(y){var z;for(z=0;z<p;z++){y.apply(u[z])}return this},on:function(z,y){if(u[0]===undefined||arguments.length>2){return""}var C=1,B=[],D=[];if(typeof(z)==="string"){B[0]=z;D[0]=y}else{if(typeof(z)==="object"){if(typeof(z[0])==="string"){B=z;D[0]=y}else{for(key in z){C=B.push(key);D.push(z[key])}}}}for(var A=C;A--;){if(u[0].addEventListener){for(i=p;i--;){u[i].addEventListener(B[A],D[A],false)}}else{if(u[0].attachEvent){for(i=p;i--;){u[i].attachEvent("on"+B[A],D[A])}}}}return this},before:function(y){n(y,true,false);return this},after:function(y){n(y,false,false);return this},append:function(y){n(y,false,true);return this},prepend:function(y){n(y,true,true);return this},css:function(D){var B,A,z=t.detect("browser"),C=t.detect("isIEolder"),E=t.detect("isIE");var y={opacity:function(G,F){if(F!==undefined){if(E){G.style.opacity=F;G.style.filter="alpha(opacity="+F*100+")"}else{G.style.opacity=F}}else{return G.style.opacity}},"border-radius":function(G,F){if(F){if(z==="f3"){G.style.MozBorderRadius=F}}else{if(z==="f3"){return G.style.MozBorderRadius}else{if(z==="ie9+"){return G.style.borderRadius}}}}};if(typeof(D)==="string"){if(E||z==="f3"){if(D=="border-radius"){return y[D](u[0])}return u[0].style[D]}return u[0].style[D]}for(B=p;B--;){for(A in D){if(D.hasOwnProperty(A)){if(E||z==="f3"){if(y[A]!==undefined){y[A](u[B],D[A])}else{u[B].style[A]=D[A]}}else{u[B].style.setProperty(A,D[A],"")}}}}return this},html:function(y){if(y!==undefined){u[0].innerHTML=y}else{return u[0].innerHTML}},value:function(B){var z=function(C){if(t.detect("isIE")||t.detect("isIEolder")){if(u[C].type=="select-one"){return u[C].options[u[C].selectedIndex].value}return u[C].value}return u[C].value};var A=function(C,D){if(t.detect("isIE")||t.detect("isIEolder")){if(u[C].type=="select-one"){u[C].options[u[C].selectedIndex].value=D}u[C].value=D}else{u[C].value=D}};if(u[0]===undefined){return""}if(B!==undefined){A(0,B)}else{if(p>1){var y=[];for(i=0;i<p;i++){y.push(z(i))}return y}return z(0)}},focus:function(){if(u[0]===undefined){return""}for(var y=p;y--;){u[y].focus()}},attr:function(y,z){if(z!==undefined){if(y==="class"){return u[0].className=z}else{return u[0][y]=z}}else{if(y==="class"){return u[0].className}else{return u[0][y]}}},index:function(z){if(z!==undefined){for(var y=p;y>=0;y--){if(u[y]===z){break}}return y}},empty:function(){if(u[0]===undefined){return""}for(var y=0;y<p;y++){var A=u[y].childNodes[0];while(A){var z=A.nextSibling;u[y].removeChild(A);A=z}}},destroy:function(B){if(u[0]===undefined){return""}if(B!==undefined&&typeof B==="string"){var A=t.get(w+" "+B),y=A.length;for(var z=y;z--;){parent=A[z].parentNode;parent.removeChild(A[z])}}else{for(z=p;z--;){parent=u[z].parentNode;parent.removeChild(u[z])}}}};(function s(){var y;for(y in x){u[y]=x[y]}})();return u};a.prototype.ajax=function(j){var j=j||{},g={async:true,content_type:"",connection:"",data_type:"",error:function(m){try{console.log(m)}catch(n){}},start_load:function(){},end_load:function(){},loader:"",method:"GET",parameter:"",success:function(){},successHTML:"",stop:"",url:""},k=null,l="",f=0,e="",h="";if(b.XMLHttpRequest){k=new XMLHttpRequest()}else{if(b.ActiveXObject){k=new ActiveXObject("Microsoft.XMLHTTP")}else{g.error("e_ajax#1")}}c(g,j);if(g.parameter!=""){for(attrname in g.parameter){l+=attrname+"="+g.parameter[attrname]+"&"}l=l.substring(0,l.length-1);if(g.method==="POST"){if(!g.content_type){g.content_type="application/x-www-form-urlencoded"}}else{h="?"+l}}else{l=null}if(t.detect("isIE")&&g.method==="POST"){e="?"+((""+Math.random()).replace(/\D/g,""))}k.onreadystatechange=function(){if(k.readyState==4&&k.status==200){if(g.successHTML){if(typeof(g.successHTML)==="string"){t.d.getElementById(g.successHTML).innerHTML=k.responseText}else{if(typeof(g.successHTML)==="object"){if(typeof(g.successHTML.html)==="function"){g.successHTML.html(k.responseText)}else{g.successHTML.innerHTML=k.responseText}}}}g.end_load();g.success(k.responseText)}else{if(k.readyState==4&&k.status==400){g.end_load();g.error("400 Bad Request")}else{if(k.readyState==4&&k.status!=200){g.end_load();g.error("Fetched the wrong page or network error")}}}};k.open(g.method,g.url+h+e,g.async);if(g.content_type){k.setRequestHeader("Content-type",g.content_type)}if(g.connection){k.setRequestHeader("Connection",g.connection)}if(g.data_type){k.setRequestHeader("dataType",g.data_type)}if(g.loader){var d='<img src="'+g.loader+'" alt="" />';t.d.getElementById(g.successHTML).innerHTML=d}k.setRequestHeader("X-Requested-With","XMLHttpRequest");g.start_load();if(g.stop){t.task(g.stop,function(){k.abort()})}k.send(l);return this};a.prototype.task=function(g,d){var f,h=t.requestAnimFrame;if(arguments.length>2){f=arguments[1];d=arguments[2]}var k=+new Date(),j=f;function e(){var l=+new Date()-k;if(f!==undefined){if(l>j){j+=f;d()}}if(l<g||(g=="loop"&&f!==undefined)){h(e)}else{if(f===undefined){d()}}}e()}})(window);