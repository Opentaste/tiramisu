(function(b){function a(){this.version="0.1.0-b5";this.d=document;this.selector="QSA";this.requestAnimFrame=(function(){return b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||function(e,d){b.setTimeout(e,1000/60)}})()}b.tiramisu=b.t=new a();function c(e,d){for(var f in d){e[f]=d[f]}}a.prototype.detect=function(g){var f=navigator.userAgent,k=navigator.appName,j=f.substring(f.indexOf("Firefox")),e=j.split("/")[1].split(".")[0],d=f.substring(f.indexOf("Version")).split("/")[1];var h={browser:function(){if(k==="Netscape"){if(j.split("/")[0]!=="Firefox"){return"safarichrome"}else{if(e==="4"){return"firefox4"}return"firefox3"}}else{if(k=="Opera"){if(d.split(".")[1]>49){return"Opera10.5+"}return"Opera10.4"}else{if(/MSIE (\d+\.\d+);/.test(f)){var l=new Number(RegExp.$1);if(l>8){return"IE9+"}else{if(l===8){return"IE8"}}return"IE_older"}else{return"IE"}}}},isIE:function(){return this.browser()==="IE9+"||this.browser()==="IE8"||this.browser()==="IE_older"},isIEolder:function(){return this.browser()==="IE8"||this.browser()==="IE_older"},isFirefox:function(){return this.browser()==="firefox3"||this.browser()==="firefox4"},isChrome:function(){return this.browser()==="safarichrome"},querySelectorAll:function(){return(tiramisu.selector==="QSA"&&typeof tiramisu.d.querySelectorAll!=="undefined")},color:function(){if(this.isIEolder()){return false}return true}};return h[g]()};a.prototype.get=function(v){var l={nl:"\n|\r\n|\r|\f",nonascii:"[^\0-\177]",unicode:"\\[0-9A-Fa-f]{1,6}(\r\n|[s\n\r\t\f])?",escape:"#{unicode}|\\[^\n\r\f0-9A-Fa-f]",nmchar:"[_A-Za-z0-9-]|#{nonascii}|#{escape}",nmstart:"[_A-Za-z]|#{nonascii}|#{escape}",ident:"[-@]?(#{nmstart})(#{nmchar})*",name:"(#{nmchar})+"};var m={"id and name":"(#{ident}##{ident})",id:"(##{ident})","class":"(\\.#{ident})","name and class":"(#{ident}\\.#{ident})",element:"(#{ident})","pseudo class":"(:#{ident})"};function u(x){return x.replace(/^\s+|\s+$/g,"").replace(/[ \t\r\n\f]+/g," ")}var g=function(){function y(E,D){var B=true,C;while(B){C=E.match(/#\{([^}]+)\}/);if(C&&C[1]){E=E.replace(new RegExp("#{"+C[1]+"}","g"),D[C[1]]);B=true}else{B=false}}return E}function x(B){return B.replace(/\//g,"//")}function A(){var C,F,B={},D,E;if(arguments.length===2){E=arguments[0];D=arguments[1]}else{E=arguments[0];D=arguments[0]}for(C in D){F=x(y(D[C],E));B[C]=F}return B}function z(B){var D=[],C;for(C in B){D.push(B[C])}return new RegExp(D.join("|"),"g")}return z(A(A(l),m))};var o={byAttr:function(B,z,A){var y,x=[];for(y in B){if(B[y]&&B[y][z]===A){x.push(B[y])}}return x}};var p={byId:function(x,y){return(x)?[x.getElementById(y)]:[]},byNodeName:function(x,B){if(x===null){return[]}var A,z=[],y=x.getElementsByTagName(B);for(A=0;A<y.length;A++){z.push(y[A])}return z},byClassName:function(x,B){if(x===null){return[]}var A,z=[],y=x.getElementsByTagName("*");for(A=0;A<y.length;A++){if(y[A].className.match("\\b"+B+"\\b")){z.push(y[A])}}return z}};var j={id:function(y,x){x=x.split("#")[1];return p.byId(y,x)},"name and id":function(y,x){var A=x.split("#"),z=A[0],B=A[1];return o.byAttr(p.byId(y,B),"nodeName",z.toUpperCase())},name:function(y,x){return p.byNodeName(y,x)},"class":function(y,x){x=x.split(".")[1];return p.byClassName(y,x)},"name and class":function(y,x){var B=x.split("."),z=B[0],A=B[1];return o.byAttr(p.byClassName(y,A),"nodeName",z.toUpperCase())}};var f={id:function(y,x){x=x.split("#")[1];return y&&y.id===x},name:function(x,y){return x.nodeName===y.toUpperCase()},"name and id":function(y,x){return f.id(y,x)&&f.name(y,x.split("#")[0])},"class":function(y,x){if(y&&y.className){x=x.split(".")[1];return y.className.match("\\b"+x+"\\b")}},"name and class":function(y,x){return f["class"](y,x)&&f.name(y,x.split(".")[0])}};function q(x,y){this.identity=x;this.finder=y}q.prototype.toString=function(){return"identity: "+this.identity+", finder: "+this.finder};function h(x){this.selector=u(x);this.tokens=[];this.tokenize()}h.prototype.tokenize=function(){var x,y,z;y=g();y.lastIndex=0;while(x=y.exec(this.selector)){z=null;if(x[10]){z="id"}else{if(x[1]){z="name and id"}else{if(x[15]){z="class"}else{if(x[20]){z="name and class"}else{if(x[29]){z="name"}}}}}this.tokens.push(new q(x[0],z))}return this.tokens};function k(x,y){this.root=x;this.key_selector=y.pop();this.tokens=y;this.results=[]}k.prototype.find=function(x){if(!j[x.finder]){throw new Error("Invalid Finder: "+x.finder)}return j[x.finder](this.root,x.identity)};k.prototype.matchesToken=function(y,x){if(!f[x.finder]){throw new Error("Invalid Matcher: "+x.finder)}return f[x.finder](y,x.identity)};k.prototype.matchesAllRules=function(A){if(this.tokens.length===0){return}var z=this.tokens.length-1,y=this.tokens[z],x=false;while(z>=0&&A){if(this.matchesToken(A,y)){x=true;z--;y=this.tokens[z]}A=A.parentNode}return x&&z<0};k.prototype.parse=function(){var z,y,A=this.find(this.key_selector),x=[];for(z=0;z<A.length;z++){y=A[z];if(this.tokens.length>0){if(this.matchesAllRules(y.parentNode)){x.push(y)}}else{if(this.matchesToken(y,this.key_selector)){x.push(y)}}}return x};if(typeof v==="string"){if(t.detect("querySelectorAll")){s=tiramisu.d.querySelectorAll(v)}else{var d=new h(v);a.prototype.tokenize=new h(v);var e=new k(document,d.tokens),s=e.parse()}}else{s=[v]}function n(A,y){if(s[0]==undefined){return""}var z,B,D,C,x=s.length;for(z=0;z<x;z++){D=t.d.createElement("div");D.innerHTML=A;B=s[z].parentNode;while(D.firstChild){C=D.firstChild;if(y){B.insertBefore(C,s[z])}else{s[z].appendChild(C)}}}}var w={each:function(y){var z,x=s.length;for(z=0;z<x;z++){y.apply(s[z])}return this},on:function(z,y){if(s[0]==undefined){return""}var A,x=s.length;if(s[0].addEventListener){for(A=0;A<x;A++){s[A].addEventListener(z,y,false)}}else{if(s[0].attachEvent){for(A=0;A<x;A++){s[A].attachEvent("on"+z,y)}}}return this},before:function(x){n(x,1);return this},after:function(x){n(x,0);return this},css:function(A){var y,x,B=t.detect("isIE");var z={opacity:function(E,D){var C;if(D){E.style.opacity=D/10;E.style.filters="alpha(opacity="+D*10+")"}else{return(E.style.opacity*10).toFixed(2)}}};if(typeof(A)==="string"){if(B){return z[A](s[0])}return s[0].style[A]}for(y=0;y<s.length;y++){for(x in A){if(A.hasOwnProperty(x)){if(B){if(z[x]!==undefined){z[x](s[y],A[x])}else{s[y].style[x]=A[x]}}else{s[y].style.setProperty(x,A[x],"")}}}}return this},html:function(x){if(x!==undefined){s[0].innerHTML=x}else{return s[0].innerHTML}},value:function(y){if(s[0]==undefined){return""}if(y!==undefined){s[0].value=y}else{if(s.length>1){var x=[];for(i=0;i<s.length;i++){x.push(s[i].value)}return x}return s[0].value}},attr:function(x,y){if(y!==undefined){s[0][x]=y}else{return s[0][x]}}};(function r(){var x;for(x in w){s[x]=w[x]}})();return s};a.prototype.ajax=function(f){var f=f||{},e={async:true,content_type:"",connection:"",data_type:"",error:function(j){try{console.log(j)}catch(k){}},loader:"",method:"GET",parameter:"",success:function(){},successHTML:"",url:""},g=null,h="",d=0;if(b.XMLHttpRequest){g=new XMLHttpRequest()}else{if(b.ActiveXObject){g=new ActiveXObject("Microsoft.XMLHTTP")}else{e.error("e_ajax#1")}}c(e,f);if(t.detect("isIEolder")){e.method="POST"}if(e.parameter!=""){for(attrname in e.parameter){h+=attrname+"="+e.parameter[attrname]+"&"}h=h.substring(0,h.length-1);if(!e.content_type){e.content_type="application/x-www-form-urlencoded"}e.method="POST"}else{h=null}g.open(e.method,e.url,e.async);if(e.content_type){g.setRequestHeader("Content-type",e.content_type)}if(e.connection){g.setRequestHeader("Connection",e.connection)}if(e.data_type){g.setRequestHeader("dataType",e.data_type)}g.onreadystatechange=function(){if(g.readyState==4&&g.status==200){if(e.successHTML){t.d.getElementById(e.successHTML).innerHTML=g.responseText}e.success(g.responseText)}else{if(g.readyState==4&&g.status==400){e.error("400 Bad Request")}else{if(g.readyState==4&&g.status!=200){e.error("Fetched the wrong page or network error")}}}};g.send(h);return this};a.prototype.task=function(g,d){var f,h=t.requestAnimFrame;if(arguments.length>2){f=arguments[1];d=arguments[arguments.length-1]}var k=+new Date(),j=f;function e(){var l=+new Date()-k;if(f!==undefined){if(l>j){j+=f;d()}}if(l<g||(g=="loop"&&f!==undefined)){h(e)}else{if(f===undefined){d()}}}e()}})(window);