(function(b){function a(){this.version="0.1.0-b5";this.d=document;this.selector="QSA";this.requestAnimFrame=(function(){return b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||function(e,d){b.setTimeout(e,1000/60)}})()}b.tiramisu=b.t=new a();function c(e,d){for(var f in d){e[f]=d[f]}}a.prototype.detect=function(g){var f=navigator.userAgent,k=navigator.appName,j=f.substring(f.indexOf("Firefox")),e=j.split("/")[1].split(".")[0],d=f.substring(f.indexOf("Version")).split("/")[1];var h={browser:function(){if(k==="Netscape"){if(j.split("/")[0]!=="Firefox"){return"safarichrome"}else{if(e==="4"){return"firefox4"}return"firefox3"}}else{if(k=="Opera"){if(d.split(".")[1]>49){return"Opera10.5+"}return"Opera10.4"}else{if(/MSIE (\d+\.\d+);/.test(f)){var l=new Number(RegExp.$1);if(l>8){return"IE9+"}else{if(l===8){return"IE8"}}return"IE_older"}else{return"IE"}}}},isIE:function(){return this.browser()==="IE9+"||this.browser()==="IE8"||this.browser()==="IE_older"},isIEolder:function(){return this.browser()==="IE8"||this.browser()==="IE_older"},isFirefox:function(){return this.browser()==="firefox3"||this.browser()==="firefox4"},isChrome:function(){return this.browser()==="safarichrome"},querySelectorAll:function(){return(tiramisu.selector==="QSA"&&typeof tiramisu.d.querySelectorAll!=="undefined")},color:function(){if(this.isIEolder()){return false}return true}};return h[g]()};a.prototype.get=function(k){var m={nl:"\n|\r\n|\r|\f",nonascii:"[^\0-\177]",unicode:"\\[0-9A-Fa-f]{1,6}(\r\n|[s\n\r\t\f])?",escape:"#{unicode}|\\[^\n\r\f0-9A-Fa-f]",nmchar:"[_A-Za-z0-9-]|#{nonascii}|#{escape}",nmstart:"[_A-Za-z]|#{nonascii}|#{escape}",ident:"[-@]?(#{nmstart})(#{nmchar})*",name:"(#{nmchar})+"};var u={"id and name":"(#{ident}##{ident})",id:"(##{ident})","class":"(\\.#{ident})","name and class":"(#{ident}\\.#{ident})",element:"(#{ident})","pseudo class":"(:#{ident})"};function p(w){return w.replace(/^\s+|\s+$/g,"").replace(/[ \t\r\n\f]+/g," ")}var l=function(){function x(D,C){var A=true,B;while(A){B=D.match(/#\{([^}]+)\}/);if(B&&B[1]){D=D.replace(new RegExp("#{"+B[1]+"}","g"),C[B[1]]);A=true}else{A=false}}return D}function w(A){return A.replace(/\//g,"//")}function z(){var B,E,A={},C,D;if(arguments.length===2){D=arguments[0];C=arguments[1]}else{D=arguments[0];C=arguments[0]}for(B in C){E=w(x(C[B],D));A[B]=E}return A}function y(A){var C=[],B;for(B in A){C.push(A[B])}return new RegExp(C.join("|"),"g")}return y(z(z(m),u))};var g={byAttr:function(A,y,z){var x,w=[];for(x in A){if(A[x]&&A[x][y]===z){w.push(A[x])}}return w}};var q={byId:function(w,x){return(w)?[w.getElementById(x)]:[]},byNodeName:function(w,A){if(w===null){return[]}var z,y=[],x=w.getElementsByTagName(A);for(z=0;z<x.length;z++){y.push(x[z])}return y},byClassName:function(w,A){if(w===null){return[]}var z,y=[],x=w.getElementsByTagName("*");for(z=0;z<x.length;z++){if(x[z].className.match("\\b"+A+"\\b")){y.push(x[z])}}return y}};var v={id:function(x,w){w=w.split("#")[1];return q.byId(x,w)},"name and id":function(x,w){var z=w.split("#"),y=z[0],A=z[1];return g.byAttr(q.byId(x,A),"nodeName",y.toUpperCase())},name:function(x,w){return q.byNodeName(x,w)},"class":function(x,w){w=w.split(".")[1];return q.byClassName(x,w)},"name and class":function(x,w){var A=w.split("."),y=A[0],z=A[1];return g.byAttr(q.byClassName(x,z),"nodeName",y.toUpperCase())}};var f={id:function(x,w){w=w.split("#")[1];return x&&x.id===w},name:function(w,x){return w.nodeName===x.toUpperCase()},"name and id":function(x,w){return f.id(x,w)&&f.name(x,w.split("#")[0])},"class":function(x,w){if(x&&x.className){w=w.split(".")[1];return x.className.match("\\b"+w+"\\b")}},"name and class":function(x,w){return f["class"](x,w)&&f.name(x,w.split(".")[0])}};function e(w,x){this.identity=w;this.finder=x}e.prototype.toString=function(){return"identity: "+this.identity+", finder: "+this.finder};function r(w){this.selector=p(w);this.tokens=[];this.tokenize()}r.prototype.tokenize=function(){var w,x,y;x=l();x.lastIndex=0;while(w=x.exec(this.selector)){y=null;if(w[10]){y="id"}else{if(w[1]){y="name and id"}else{if(w[15]){y="class"}else{if(w[20]){y="name and class"}else{if(w[29]){y="name"}}}}}this.tokens.push(new e(w[0],y))}return this.tokens};function o(w,x){this.root=w;this.key_selector=x.pop();this.tokens=x;this.results=[]}o.prototype.find=function(w){if(!v[w.finder]){throw new Error("Invalid Finder: "+w.finder)}return v[w.finder](this.root,w.identity)};o.prototype.matchesToken=function(x,w){if(!f[w.finder]){throw new Error("Invalid Matcher: "+w.finder)}return f[w.finder](x,w.identity)};o.prototype.matchesAllRules=function(z){if(this.tokens.length===0){return}var y=this.tokens.length-1,x=this.tokens[y],w=false;while(y>=0&&z){if(this.matchesToken(z,x)){w=true;y--;x=this.tokens[y]}z=z.parentNode}return w&&y<0};o.prototype.parse=function(){var y,x,z=this.find(this.key_selector),w=[];for(y=0;y<z.length;y++){x=z[y];if(this.tokens.length>0){if(this.matchesAllRules(x.parentNode)){w.push(x)}}else{if(this.matchesToken(x,this.key_selector)){w.push(x)}}}return w};if(typeof k==="string"){if(t.detect("querySelectorAll")){n=tiramisu.d.querySelectorAll(k)}else{var j=new r(k);a.prototype.tokenize=new r(k);var d=new o(document,j.tokens),n=d.parse()}}else{n=[k]}var h={each:function(x){var y,w=n.length;for(y=0;y<w;y++){x.apply(n[y])}return this},on:function(y,x){if(n[0]==undefined){return""}var z,w=n.length;if(n[0].addEventListener){for(z=0;z<w;z++){n[z].addEventListener(y,x,false)}}else{if(n[0].attachEvent){for(z=0;z<w;z++){n[z].attachEvent("on"+y,x)}}}return this},css:function(z){var x,w,A=t.detect("isIE");var y={opacity:function(D,C){var B;if(C){D.style.opacity=C/10;D.style.filters="alpha(opacity="+C*10+")"}else{return(D.style.opacity*10).toFixed(2)}}};if(typeof(z)==="string"){if(A){return y[z](n[0])}return n[0].style[z]}for(x=0;x<n.length;x++){for(w in z){if(z.hasOwnProperty(w)){if(A){if(y[w]!==undefined){y[w](n[x],z[w])}else{n[x].style[w]=z[w]}}else{n[x].style.setProperty(w,z[w],"")}}}}return this},html:function(w){if(w!==undefined){n[0].innerHTML=w}else{return n[0].innerHTML}},value:function(x){if(n[0]==undefined){return""}if(x!==undefined){n[0].value=x}else{if(n.length>1){var w=[];for(i=0;i<n.length;i++){w.push(n[i].value)}return w}return n[0].value}},attr:function(w,x){if(x!==undefined){n[0][w]=x}else{return n[0][w]}}};(function s(){var w;for(w in h){n[w]=h[w]}})();return n};a.prototype.ajax=function(f){var f=f||{},e={async:true,content_type:"",connection:"",data_type:"",error:function(j){try{console.log(j)}catch(k){}},loader:"",method:"GET",parameter:"",success:function(){},successHTML:"",url:""},g=null,h="",d=0;if(b.XMLHttpRequest){g=new XMLHttpRequest()}else{if(b.ActiveXObject){g=new ActiveXObject("Microsoft.XMLHTTP")}else{e.error("e_ajax#1")}}c(e,f);if(t.detect("isIEolder")){e.method="POST"}if(e.parameter!=""){for(attrname in e.parameter){h+=attrname+"="+e.parameter[attrname]+"&"}h=h.substring(0,h.length-1);if(!e.content_type){e.content_type="application/x-www-form-urlencoded"}e.method="POST"}else{h=null}g.open(e.method,e.url,e.async);if(e.content_type){g.setRequestHeader("Content-type",e.content_type)}if(e.connection){g.setRequestHeader("Connection",e.connection)}if(e.data_type){g.setRequestHeader("dataType",e.data_type)}g.onreadystatechange=function(){if(g.readyState==4&&g.status==200){if(e.successHTML){t.d.getElementById(e.successHTML).innerHTML=g.responseText}e.success(g.responseText)}else{if(g.readyState==4&&g.status==400){e.error("400 Bad Request")}else{if(g.readyState==4&&g.status!=200){e.error("Fetched the wrong page or network error")}}}};g.send(h);return this};a.prototype.task=function(g,d){var f,h=t.requestAnimFrame;if(arguments.length>2){f=arguments[1];d=arguments[arguments.length-1]}var k=+new Date(),j=f;function e(){var l=+new Date()-k;if(f!==undefined){if(l>j){j+=f;d()}}if(l<g||(g=="loop"&&f!==undefined)){h(e)}else{if(f===undefined){d()}}}e()}})(window);