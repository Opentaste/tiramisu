<html>
	<head>
		<title>Tiramisu</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
		<style>body {
    margin: 0;
    padding: 0;
    font: 14px/1.5 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif;
    color: #252519;
}
a {
    color: #252519;
}
a:hover {
    text-decoration: underline;
    color: #19469D;
}
p {
    margin: 12px 0;
}
h1, h2, h3 {
    margin: 0;
    padding: 0;
}
table#source {
    width: 100%;
    border-collapse: collapse;
}
table#source td:first-child {
    padding: 30px 40px 30px 40px;
    vertical-align: top;
}
table#source td:first-child,
table#source td:first-child pre {
    width: 450px;
}
table#source td:last-child {
    padding: 30px 0 30px 40px;
    border-left: 1px solid #E5E5EE;
    background: #F5F5FF;
}
table#source tr {
    border-bottom: 1px solid #E5E5EE;
}
table#source tr.filename {
    padding-top: 40px;
    border-top: 1px solid #E5E5EE;
}
table#source tr.filename td:first-child {
    text-transform: capitalize;
}
table#source tr.filename td:last-child {
    font-size: 12px;
}
table#source tr.filename h2 {
    margin: 0;
    padding: 0;
    cursor: pointer;
}
table#source tr.code h1,
table#source tr.code h2,
table#source tr.code h3 {
    margin-top: 30px;
    font-family: "Lucida Grande", "Helvetica Nueue", Arial, sans-serif;
    font-size: 18px;
}
table#source tr.code h2 {
    font-size: 16px;
}
table#source tr.code h3 {
    font-size: 14px;
}
table#source tr.code ul {
    margin: 15px 0 15px 35px;
    padding: 0;
}
table#source tr.code ul li {
    margin: 0;
    padding: 1px 0;
}
table#source tr.code ul li p {
    margin: 0;
    padding: 0;
}
table#source tr.code td:first-child pre {
    padding: 20px;
}
#ribbon {
    position: fixed;
    top: 0;
    right: 0;
}
code .string { color: #219161; }
code .regexp { color: #219161; }
code .keyword { color: #954121; }
code .number { color: #19469D; }
code .comment { color: #bbb; }
code .this { color: #19469D; }</style>
		<script>
			$(function(){
				$('tr.code').hide();
				$('tr.filename').toggle(function(){
					$(this).nextUntil('.filename').fadeIn();
				}, function(){
					$(this).nextUntil('.filename').fadeOut();
				});
			});
		</script>
	</head>
	<body>
<table id="source"><tbody><tr><td><h1>Tiramisu</h1><h3>version 0.0.9.7</h3>

<p>Tiramisu is a tiny, modular and fast JavaScript framework 
which takes inspiration from the famous <a href="http://jquery.com/">jQuery</a> syntax:</p>

<pre><code>tiramisu.get('h1 #unique').each(function() {
    alert(h1.innerHTML);
});</code></pre>

<p>Here are some highlights:</p>

<ul><li>Modular <em>philosophy</em>;</li><li><em>Very small</em> size (7,1Kb minified);</li><li><em>Chainable</em> methods;</li><li>Task management (a.k.a. Callbacks scheduling);</li></ul>

<h2>Resources</h2>

<ul><li><a href="http://dl.dropbox.com/u/2060843/tiramisu/docs/index.html">Documentation (0.0.9.7)</a></li><li><a href="http://dl.dropbox.com/u/2060843/tiramisu/test/runtests.html">Unit Tests</a></li></ul></td><td></td></tr><tr class="filename"><td><h2 id="src/tiramisu.js"><a href="#">tiramisu</a></h2></td><td>src/tiramisu.js</td></tr><tr class="code">
<td class="docs">
<p>The Framework's costructor exposes externally: </p>

<ul><li>A version number;</li><li>A document object reference;</li><li><em>requestAnimFrame</em> (used for handling tasks).
 </li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">function</span> <span class="class">Tiramisu</span>() {
		<span class="this">this</span>.<span class="variable">version</span> = <span class="string">'0.0.9.7'</span>;
		<span class="this">this</span>.<span class="variable">d</span> = <span class="variable">document</span>;
		<span class="this">this</span>.<span class="variable">requestAnimFrame</span> = (<span class="keyword">function</span>() {
			<span class="keyword">return</span> <span class="variable">window</span>.<span class="variable">requestAnimationFrame</span> 
            || <span class="variable">window</span>.<span class="variable">webkitRequestAnimationFrame</span> 
            || <span class="variable">window</span>.<span class="variable">mozRequestAnimationFrame</span> 
            || <span class="variable">window</span>.<span class="variable">oRequestAnimationFrame</span> 
            || <span class="variable">window</span>.<span class="variable">msRequestAnimationFrame</span> 
            || <span class="keyword">function</span>(<span class="variable">callback</span>, <span class="variable">element</span>) {
                   <span class="variable">window</span>.<span class="variable">setTimeout</span>(<span class="variable">callback</span>, <span class="number integer">1000</span> / <span class="number integer">60</span>);
			};
		})();
	}

	<span class="comment">// Exposing the framework</span>
	<span class="variable">window</span>.<span class="variable">tiramisu</span> = <span class="variable">window</span>.<span class="variable">t</span> = <span class="keyword">new</span> <span class="class">Tiramisu</span>();

	<span class="comment">// Extending object1 with object2's methods</span>
	<span class="keyword">function</span> <span class="variable">extend</span>(<span class="variable">first</span>, <span class="variable">second</span>) {
		<span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">prop</span> <span class="keyword">in</span> <span class="variable">second</span>) {
			<span class="variable">first</span>[<span class="variable">prop</span>] = <span class="variable">second</span>[<span class="variable">prop</span>];
		}
	}</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<h1>Framework Detection Module</h1>

<p>This module is mainly used to perform several <em>browser-detection tests</em>:</p>

<ul><li>browser</li><li>isIE, isFirefox, isChrome</li><li>querySelectorAll</li><li>opacity, color</li></ul>

<p>Compatibility for not support CSS:</p>

<ul><li>position:fixed - iOS Safari / Opera Mini</li><li>CSS3 Opacity - I8 older using the "filter" property</li><li>CSS3 Colors - I8 older using rgb rather than rgba</li></ul>

<h2>Example #1 (Detect browser)</h2>

<p>Here's an example on how to <em>detect</em> the current browser:</p>

<pre><code>if (tiramisu.detect('browser') === 'IE9')) {
    console.log('IE');
}</code></pre>

<p>A shortcut to perform this check is:</p>

<pre><code>if (tiramisu.detect('isIE')) {
    console.log('IE');
}</code></pre>

<p>The main difference between the first and the second example is that
<em>isIE</em> and, in general, <em>is(X)</em> methods doesn't check the browser for
a specific version.</p>

<p>If you need to perform a check for a specific version you'll need to rely on <em>detect('browser')</em>;
the possible return values are:</p>

<ul><li><em>safarichrome</em>;</li><li><em>firefox3</em>;</li><li><em>firefox4</em>;</li><li><em>Opera10.4</em>;</li><li><em>Opera10.5+</em>;</li><li><em>IE_older</em> (For IE &lt;= 6).</li><li><em>IE8</em>;</li><li><em>IE9+</em>;</li></ul>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  key The test to perform (see the var tests below)</p></li><li><p><strong>returns</strong>: <em>Boolean</em>  The test result</p></li><li><p><strong>api</strong>: <em>public</em></p><p> </p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Tiramisu</span>.<span class="variable">prototype</span>.<span class="variable">detect</span> = <span class="keyword">function</span>(<span class="variable">key</span>) {
		<span class="keyword">var</span> <span class="variable">nav_agent</span> = <span class="variable">navigator</span>.<span class="variable">userAgent</span>,
		<span class="variable">nav_name</span> = <span class="variable">navigator</span>.<span class="variable">appName</span>,
		<span class="variable">firefox</span> = <span class="variable">nav_agent</span>.<span class="variable">substring</span>(<span class="variable">nav_agent</span>.<span class="variable">indexOf</span>(<span class="string">'Firefox'</span>)),
		<span class="variable">firefox_version</span> = <span class="variable">firefox</span>.<span class="variable">split</span>(<span class="string">'/'</span>)[<span class="number integer">1</span>].<span class="variable">split</span>(<span class="string">'.'</span>)[<span class="number integer">0</span>],
		<span class="variable">opera</span> = <span class="variable">nav_agent</span>.<span class="variable">substring</span>(<span class="variable">nav_agent</span>.<span class="variable">indexOf</span>(<span class="string">'Version'</span>)).<span class="variable">split</span>(&<span class="variable">quot</span>;/&<span class="variable">quot</span>;)[<span class="number integer">1</span>];

		<span class="comment">// Turns off querySelectorAll detection</span>
		<span class="keyword">var</span> <span class="class">USE_QSA</span> = <span class="variable">false</span>;

		<span class="comment">// Netscape includes Firefox, Safari or Chrome</span>
		<span class="keyword">var</span> <span class="variable">tests</span> = {

			<span class="string">'browser'</span>: <span class="keyword">function</span>() {
				<span class="keyword">if</span> (<span class="variable">nav_name</span> === <span class="string">'Netscape'</span>) {
					<span class="keyword">if</span> (<span class="variable">firefox</span>.<span class="variable">split</span>(<span class="string">'/'</span>)[<span class="number integer">0</span>] !== <span class="string">'Firefox'</span>) { <span class="comment">// Case 1 - Safari or Chrome</span>
						<span class="keyword">return</span> &<span class="variable">quot</span>;<span class="variable">safarichrome</span>&<span class="variable">quot</span>;
					} <span class="keyword">else</span> {
						<span class="keyword">if</span> (<span class="variable">firefox_version</span> === <span class="string">'4'</span>) { <span class="comment">// Case 2 - Firefox 4</span>
							<span class="keyword">return</span> <span class="string">'firefox4'</span>
						}
						<span class="keyword">return</span> <span class="string">'firefox3'</span>
					}
				} <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">nav_name</span> == <span class="string">'Opera'</span>) {
					<span class="keyword">if</span> (<span class="variable">opera</span>.<span class="variable">split</span>(<span class="string">'.'</span>)[<span class="number integer">1</span>] &<span class="variable">gt</span>; <span class="number integer">49</span>) { <span class="comment">// Case 4 - Opera 10.5+</span>
						<span class="keyword">return</span> <span class="string">'Opera10.5+'</span>
					}
					<span class="keyword">return</span> <span class="string">'Opera10.4'</span>;
				} <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/MSIE (\d+\.\d+);/</span>.<span class="variable">test</span>(<span class="variable">nav_agent</span>)) { <span class="comment">//test for MSIE x.x;</span>
					<span class="keyword">var</span> <span class="variable">ie</span> = <span class="keyword">new</span> <span class="class">Number</span>(<span class="class">RegExp</span>.$<span class="number integer">1</span>) <span class="comment">// capture x.x portion and store as a number</span>
					<span class="keyword">if</span> (<span class="variable">ie</span> &<span class="variable">gt</span>; <span class="number integer">8</span>) {
						<span class="keyword">return</span> <span class="string">'IE9+'</span>;
					} <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">ie</span> === <span class="number integer">8</span>) {
						<span class="keyword">return</span> <span class="string">'IE8'</span>;
					}
					<span class="keyword">return</span> <span class="string">'IE_older'</span>;
				} <span class="keyword">else</span> { <span class="comment">// Case 6 - IE or other</span>
					<span class="keyword">return</span> <span class="string">'IE'</span>;
				}
			},

			<span class="string">'isIE'</span>: <span class="keyword">function</span>() {
				<span class="keyword">return</span> <span class="this">this</span>.<span class="variable">browser</span>() === <span class="string">'IE9+'</span> || <span class="this">this</span>.<span class="variable">browser</span>() === <span class="string">'IE8'</span> || <span class="this">this</span>.<span class="variable">browser</span>() === <span class="string">'IE_older'</span>;
			},

			<span class="string">'isIEolder'</span>: <span class="keyword">function</span>() {
				<span class="keyword">return</span> <span class="this">this</span>.<span class="variable">browser</span>() === <span class="string">'IE8'</span> || <span class="this">this</span>.<span class="variable">browser</span>() === <span class="string">'IE_older'</span>;
			},

			<span class="string">'isFirefox'</span>: <span class="keyword">function</span>() {
				<span class="keyword">return</span> <span class="this">this</span>.<span class="variable">browser</span>() === &<span class="variable">quot</span>;<span class="variable">firefox3</span>&<span class="variable">quot</span>; || <span class="this">this</span>.<span class="variable">browser</span>() === &<span class="variable">quot</span>;<span class="variable">firefox4</span>&<span class="variable">quot</span>;
			},

			<span class="string">'isChrome'</span>: <span class="keyword">function</span>() {
				<span class="keyword">return</span> <span class="this">this</span>.<span class="variable">browser</span>() === <span class="string">'safarichrome'</span>
			},

			<span class="string">'querySelectorAll'</span>: <span class="keyword">function</span>() {
				<span class="keyword">return</span> (<span class="class">USE_QSA</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="keyword">typeof</span> <span class="this">this</span>.<span class="variable">d</span>.<span class="variable">querySelectorAll</span> !== <span class="string">'undefined'</span>)
			},

			<span class="string">'opacity'</span>: <span class="keyword">function</span>() {
				<span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">isIEolder</span>()) {
					<span class="keyword">return</span> <span class="variable">false</span>;
				}
				<span class="keyword">return</span> <span class="variable">true</span>;
			},

			<span class="string">'color'</span>: <span class="keyword">function</span>() {
				<span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">isIEolder</span>()) {
					<span class="keyword">return</span> <span class="variable">false</span>;
				}
				<span class="keyword">return</span> <span class="variable">true</span>;
			}
		};
		<span class="keyword">return</span> <span class="variable">tests</span>[<span class="variable">key</span>]();
	};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<h1>Framework Selector Module</h1>

<p>A CSS Parser for handling DOM elements.</p>

<h2>Usage</h2>

<pre><code>tiramisu.get(*SELECTOR*)</code></pre>

<p>or</p>

<pre><code>t.get(*SELECTOR*)</code></pre>

<p>where <em>SELECTOR</em> is a <em>valid</em> CSS selector (see examples below).</p>

<p>Tiramisu will use <em>querySelectorAll</em> if the current browser implements it;
if not present <strong>Tiramisu</strong> fallback to a custom, simple CSS selector.</p>

<p>This simple selector implementation is <em>cross-browser</em> and actually implements
the following CSS rules:</p>

<ul><li><em>id and name</em>;</li><li><em>id</em>;</li><li><em>class</em>;</li><li><em>name and class</em>;</li><li><em>element</em>;</li></ul>

<p>Note that this implementation is not fast as <em>querySelectorAll</em> since it relies
on pure (<em>not optimized</em>) JavaScript.</p>

<h2>Example #1 (Select all li elements)</h2>

<pre><code>&lt;ul id="myList"&gt;
  &lt;li&gt; First. &lt;/li&gt;
  &lt;li&gt; Second. &lt;/li&gt;
  &lt;li&gt; Third. &lt;/li&gt;
&lt;/ul&gt;
...
var li = tiramisu.get('#myList li');</code></pre>

<h2>Example #2 (Select all li with class “special”)</h2>

<pre><code>&lt;ul id="myList"&gt;
  &lt;li&gt; First. &lt;/li&gt;
  &lt;li class="special"&gt; Second. &lt;/li&gt;
  &lt;li&gt; Third. &lt;/li&gt;
&lt;/ul&gt;
...
var li_special1 = tiramisu.get('#myList .special');

// Better way to do it :) 
var li_special2 = tiramisu.get('#myList li.special');</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  selector A CSS Selector</p></li><li><p><strong>returns</strong>: <em>Object</em>  The node list</p></li><li><p><strong>api</strong>: <em>public</em></p><p> </p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Tiramisu</span>.<span class="variable">prototype</span>.<span class="variable">get</span> = <span class="keyword">function</span>(<span class="variable">selector</span>) {
		<span class="keyword">if</span> (<span class="variable">tiramisu</span>.<span class="variable">detect</span>(<span class="string">'querySelectorAll'</span>)) <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">d</span>.<span class="variable">querySelectorAll</span>(<span class="variable">selector</span>);

		<span class="keyword">var</span> <span class="variable">macros</span> = {
			<span class="string">'nl'</span>: <span class="string">'\n|\r\n|\r|\f'</span>,
			<span class="string">'nonascii'</span>: <span class="string">'[^\0-\177]'</span>,
			<span class="string">'unicode'</span>: <span class="string">'\\[0-9A-Fa-f]{1,6}(\r\n|[\s\n\r\t\f])?'</span>,
			<span class="string">'escape'</span>: <span class="string">'#{unicode}|\\[^\n\r\f0-9A-Fa-f]'</span>,
			<span class="string">'nmchar'</span>: <span class="string">'[_A-Za-z0-9-]|#{nonascii}|#{escape}'</span>,
			<span class="string">'nmstart'</span>: <span class="string">'[_A-Za-z]|#{nonascii}|#{escape}'</span>,
			<span class="string">'ident'</span>: <span class="string">'[-@]?(#{nmstart})(#{nmchar})*'</span>,
			<span class="string">'name'</span>: <span class="string">'(#{nmchar})+'</span>
		};

		<span class="keyword">var</span> <span class="variable">rules</span> = {
			<span class="string">'id and name'</span>: <span class="string">'(#{ident}##{ident})'</span>,
			<span class="string">'id'</span>: <span class="string">'(##{ident})'</span>,
			<span class="string">'class'</span>: <span class="string">'(\\.#{ident})'</span>,
			<span class="string">'name and class'</span>: <span class="string">'(#{ident}\\.#{ident})'</span>,
			<span class="string">'element'</span>: <span class="string">'(#{ident})'</span>,
			<span class="string">'pseudo class'</span>: <span class="string">'(:#{ident})'</span>
		};

		<span class="comment">// Normalize the selector</span>
		<span class="keyword">function</span> <span class="variable">normalize</span>(<span class="variable">text</span>) {
			<span class="keyword">return</span> <span class="variable">text</span>.<span class="variable">replace</span>(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">''</span>).<span class="variable">replace</span>(<span class="regexp">/[ \t\r\n\f]+/g</span>, <span class="string">' '</span>);
		}

		<span class="comment">// Scan macros and rules to build a big regex</span>
		<span class="keyword">var</span> <span class="variable">scanner</span> = <span class="keyword">function</span>() {
			<span class="keyword">function</span> <span class="variable">replacePattern</span>(<span class="variable">pattern</span>, <span class="variable">patterns</span>) {
				<span class="keyword">var</span> <span class="variable">matched</span> = <span class="variable">true</span>,
				<span class="variable">match</span>;
				<span class="keyword">while</span> (<span class="variable">matched</span>) {
					<span class="variable">match</span> = <span class="variable">pattern</span>.<span class="variable">match</span>(<span class="regexp">/#\{([^}]+)\}/</span>);
					<span class="keyword">if</span> (<span class="variable">match</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">match</span>[<span class="number integer">1</span>]) {
						<span class="variable">pattern</span> = <span class="variable">pattern</span>.<span class="variable">replace</span>(<span class="keyword">new</span> <span class="class">RegExp</span>(<span class="string">'#\{'</span> + <span class="variable">match</span>[<span class="number integer">1</span>] + <span class="string">'\}'</span>, <span class="string">'g'</span>), <span class="variable">patterns</span>[<span class="variable">match</span>[<span class="number integer">1</span>]]);
						<span class="variable">matched</span> = <span class="variable">true</span>;
					} <span class="keyword">else</span> {
						<span class="variable">matched</span> = <span class="variable">false</span>;
					}
				}
				<span class="keyword">return</span> <span class="variable">pattern</span>;
			}

			<span class="keyword">function</span> <span class="variable">escapePattern</span>(<span class="variable">text</span>) {
				<span class="keyword">return</span> <span class="variable">text</span>.<span class="variable">replace</span>(<span class="regexp">/\/</span><span class="regexp">/g, '/</span>/');
			}

			<span class="keyword">function</span> <span class="variable">convertPatterns</span>() {
				<span class="keyword">var</span> <span class="variable">key</span>, <span class="variable">pattern</span>, <span class="variable">results</span> = {},
				<span class="variable">patterns</span>, <span class="variable">source</span>;

				<span class="keyword">if</span> (<span class="variable">arguments</span>.<span class="variable">length</span> === <span class="number integer">2</span>) {
					<span class="variable">source</span> = <span class="variable">arguments</span>[<span class="number integer">0</span>];
					<span class="variable">patterns</span> = <span class="variable">arguments</span>[<span class="number integer">1</span>]
				} <span class="keyword">else</span> {
					<span class="variable">source</span> = <span class="variable">arguments</span>[<span class="number integer">0</span>];
					<span class="variable">patterns</span> = <span class="variable">arguments</span>[<span class="number integer">0</span>];
				}

				<span class="keyword">for</span> (<span class="variable">key</span> <span class="keyword">in</span> <span class="variable">patterns</span>) {
					<span class="variable">pattern</span> = <span class="variable">escapePattern</span>(<span class="variable">replacePattern</span>(<span class="variable">patterns</span>[<span class="variable">key</span>], <span class="variable">source</span>));
					<span class="variable">results</span>[<span class="variable">key</span>] = <span class="variable">pattern</span>;
				}
				<span class="keyword">return</span> <span class="variable">results</span>;
			}

			<span class="keyword">function</span> <span class="variable">joinPatterns</span>(<span class="variable">regexps</span>) {
				<span class="keyword">var</span> <span class="variable">results</span> = [],
				<span class="variable">key</span>;

				<span class="keyword">for</span> (<span class="variable">key</span> <span class="keyword">in</span> <span class="variable">regexps</span>) {
					<span class="variable">results</span>.<span class="variable">push</span>(<span class="variable">regexps</span>[<span class="variable">key</span>]);
				}

				<span class="keyword">return</span> <span class="keyword">new</span> <span class="class">RegExp</span>(<span class="variable">results</span>.<span class="variable">join</span>(<span class="string">'|'</span>), <span class="string">'g'</span>);
			}

			<span class="keyword">return</span> <span class="variable">joinPatterns</span>(<span class="variable">convertPatterns</span>(<span class="variable">convertPatterns</span>(<span class="variable">macros</span>), <span class="variable">rules</span>));
		};

		<span class="keyword">var</span> <span class="variable">filter</span> = {
			<span class="string">'byAttr'</span>: <span class="keyword">function</span>(<span class="variable">elements</span>, <span class="variable">attribute</span>, <span class="variable">value</span>) {
				<span class="keyword">var</span> <span class="variable">key</span>, <span class="variable">results</span> = [];
				<span class="keyword">for</span> (<span class="variable">key</span> <span class="keyword">in</span> <span class="variable">elements</span>) {
					<span class="keyword">if</span> (<span class="variable">elements</span>[<span class="variable">key</span>] &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">elements</span>[<span class="variable">key</span>][<span class="variable">attribute</span>] === <span class="variable">value</span>) {
						<span class="variable">results</span>.<span class="variable">push</span>(<span class="variable">elements</span>[<span class="variable">key</span>]);
					}
				}
				<span class="keyword">return</span> <span class="variable">results</span>;
			}
		};

		<span class="keyword">var</span> <span class="variable">find</span> = {
			<span class="string">'byId'</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">id</span>) {
				<span class="keyword">return</span> (<span class="variable">root</span>) ? [<span class="variable">root</span>.<span class="variable">getElementById</span>(<span class="variable">id</span>)] : [];
			},

			<span class="string">'byNodeName'</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">tagName</span>) {
				<span class="keyword">if</span> (<span class="variable">root</span> === <span class="keyword">null</span>) <span class="keyword">return</span> [];
				<span class="keyword">var</span> <span class="variable">i</span>, <span class="variable">results</span> = [],
				<span class="variable">nodes</span> = <span class="variable">root</span>.<span class="variable">getElementsByTagName</span>(<span class="variable">tagName</span>);

				<span class="keyword">for</span> (<span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">nodes</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
					<span class="variable">results</span>.<span class="variable">push</span>(<span class="variable">nodes</span>[<span class="variable">i</span>]);
				}
				<span class="keyword">return</span> <span class="variable">results</span>;
			},

			<span class="string">'byClassName'</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">className</span>) {
				<span class="keyword">if</span> (<span class="variable">root</span> === <span class="keyword">null</span>) <span class="keyword">return</span> [];
				<span class="keyword">var</span> <span class="variable">i</span>, <span class="variable">results</span> = [],
				<span class="variable">nodes</span> = <span class="variable">root</span>.<span class="variable">getElementsByTagName</span>(<span class="string">'*'</span>);

				<span class="keyword">for</span> (<span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">nodes</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
					<span class="keyword">if</span> (<span class="variable">nodes</span>[<span class="variable">i</span>].<span class="variable">className</span>.<span class="variable">match</span>(<span class="string">'\\b'</span> + <span class="variable">className</span> + <span class="string">'\\b'</span>)) {
						<span class="variable">results</span>.<span class="variable">push</span>(<span class="variable">nodes</span>[<span class="variable">i</span>]);
					}
				}
				<span class="keyword">return</span> <span class="variable">results</span>;
			}
		};

		<span class="keyword">var</span> <span class="variable">findMap</span> = {
			<span class="string">'id'</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">selector</span>) {
				<span class="variable">selector</span> = <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'#'</span>)[<span class="number integer">1</span>];
				<span class="keyword">return</span> <span class="variable">find</span>.<span class="variable">byId</span>(<span class="variable">root</span>, <span class="variable">selector</span>);
			},

			<span class="string">'name and id'</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">selector</span>) {
				<span class="keyword">var</span> <span class="variable">matches</span> = <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'#'</span>),
				<span class="variable">name</span> = <span class="variable">matches</span>[<span class="number integer">0</span>],
				<span class="variable">id</span> = <span class="variable">matches</span>[<span class="number integer">1</span>];
				<span class="keyword">return</span> <span class="variable">filter</span>.<span class="variable">byAttr</span>(<span class="variable">find</span>.<span class="variable">byId</span>(<span class="variable">root</span>, <span class="variable">id</span>), <span class="string">'nodeName'</span>, <span class="variable">name</span>.<span class="variable">toUpperCase</span>());
			},

			<span class="string">'name'</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">selector</span>) {
				<span class="keyword">return</span> <span class="variable">find</span>.<span class="variable">byNodeName</span>(<span class="variable">root</span>, <span class="variable">selector</span>);
			},

			<span class="string">'class'</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">selector</span>) {
				<span class="variable">selector</span> = <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'\.'</span>)[<span class="number integer">1</span>];
				<span class="keyword">return</span> <span class="variable">find</span>.<span class="variable">byClassName</span>(<span class="variable">root</span>, <span class="variable">selector</span>);
			},

			<span class="string">'name and class'</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">selector</span>) {
				<span class="keyword">var</span> <span class="variable">matches</span> = <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'\.'</span>),
				<span class="variable">name</span> = <span class="variable">matches</span>[<span class="number integer">0</span>],
				<span class="variable">className</span> = <span class="variable">matches</span>[<span class="number integer">1</span>];
				<span class="keyword">return</span> <span class="variable">filter</span>.<span class="variable">byAttr</span>(<span class="variable">find</span>.<span class="variable">byClassName</span>(<span class="variable">root</span>, <span class="variable">className</span>), <span class="string">'nodeName'</span>, <span class="variable">name</span>.<span class="variable">toUpperCase</span>());
			}
		};

		<span class="keyword">var</span> <span class="variable">matchMap</span> = {
			<span class="string">'id'</span>: <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">selector</span>) {
				<span class="variable">selector</span> = <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'#'</span>)[<span class="number integer">1</span>];
				<span class="keyword">return</span> <span class="variable">element</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">element</span>.<span class="variable">id</span> === <span class="variable">selector</span>;
			},

			<span class="string">'name'</span>: <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">nodeName</span>) {
				<span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">nodeName</span> === <span class="variable">nodeName</span>.<span class="variable">toUpperCase</span>();
			},

			<span class="string">'name and id'</span>: <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">selector</span>) {
				<span class="keyword">return</span> <span class="variable">matchMap</span>.<span class="variable">id</span>(<span class="variable">element</span>, <span class="variable">selector</span>) &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">matchMap</span>.<span class="variable">name</span>(<span class="variable">element</span>, <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'#'</span>)[<span class="number integer">0</span>]);
			},

			<span class="string">'class'</span>: <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">selector</span>) {
				<span class="keyword">if</span> (<span class="variable">element</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">element</span>.<span class="variable">className</span>) {
					<span class="variable">selector</span> = <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'\.'</span>)[<span class="number integer">1</span>];
					<span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">className</span>.<span class="variable">match</span>(<span class="string">'\\b'</span> + <span class="variable">selector</span> + <span class="string">'\\b'</span>);
				}
			},

			<span class="string">'name and class'</span>: <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">selector</span>) {
				<span class="keyword">return</span> <span class="variable">matchMap</span>[<span class="string">'class'</span>](<span class="variable">element</span>, <span class="variable">selector</span>) &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">matchMap</span>.<span class="variable">name</span>(<span class="variable">element</span>, <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'\.'</span>)[<span class="number integer">0</span>]);
			}
		};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<h2>Each iterator extension</h2>

<p>Applies a callback function to a list of DOM nodes.</p>

<h2>Usage</h2>

<pre><code>tiramisu.get(*SELECTOR*).each(*CALLBACK*)</code></pre>

<p>Where <em>SELECTOR</em> is a valid CSS selector and <em>CALLBACK</em> a 
function object.</p>

<p>It is common to retrieve a list of DOM nodes and then apply the
<em>same</em> function to all of it's element:</p>

<h2>Example #1 (alert the innerHTML of every element in a list)</h2>

<pre><code>&lt;ul&gt;
  &lt;li&gt; One. &lt;/li&gt;
  &lt;li&gt; Two. &lt;/li&gt;
  &lt;li&gt; Three. &lt;/li&gt;
&lt;/ul&gt;
...
tiramisu.get('ul li').each(function() {
    alert(this.innerHTML);
});</code></pre>

<p>As you can see, <strong>this</strong> is used for referencing the current
iteration item.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>function</em>  cb The callback function to apply</p><pre><code>     </code></pre></li></ul>
</td>
<td class="code">
<pre><code><span class="string">'each'</span>: <span class="keyword">function</span>(<span class="variable">cb</span>) {
				<span class="keyword">var</span> <span class="variable">i</span>;
				<span class="keyword">for</span> (<span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">results</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
					<span class="variable">cb</span>.<span class="variable">apply</span>(<span class="variable">results</span>[<span class="variable">i</span>]);
				}
				<span class="keyword">return</span> <span class="this">this</span>;
			},</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<h2>Event handler extension </h2>

<p>Attach a callback function to an event.</p>

<h2>Usage</h2>

<pre><code>tiramisu.get(*SELECTOR*).on(*EVENT*, *CALLBACK*)</code></pre>

<p>where <em>SELECTOR</em> is a valid CSS selector, <em>EVENT</em> is
the event listener and <em>CALLBACK</em> the function to attach.</p>

<h2>Example #1 (Clicking on a p element displays “Hello!”)</h2>

<pre><code>&lt;p&gt; Click me! &lt;/p&gt;
&lt;p&gt; Click me too! &lt;/p&gt;
&lt;p&gt; And me? &lt;/p&gt;
...
tiramisu.get('p').on('click', function() {
    alert('Hello!');
});</code></pre>

<h2>Example #2 (Hovering on a li element displays his innerHTML)</h2>

<pre><code> &lt;ol&gt;
   &lt;li&gt; Banana &lt;/li&gt;
   &lt;li&gt; Apple &lt;/li&gt;
   &lt;li&gt; Pineapple &lt;/li&gt;
   &lt;li&gt; Strawberry &lt;/li&gt;
 &lt;/ol&gt;
 ...
 tiramisu.get('ul li').on('mouseover', function() {
     alert(this.innerHTML);
 });</code></pre>

<p> As in the “each” example, it is possible to use <strong>this</strong> to
 reference the current list item.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>event</em>  evt An event listener</p></li><li><p><strong>param</strong>: <em>function</em>  cb The callback function to attach</p><pre><code>     </code></pre></li></ul>
</td>
<td class="code">
<pre><code><span class="string">'on'</span>: <span class="keyword">function</span>(<span class="variable">evt</span>, <span class="variable">cb</span>) {
				<span class="keyword">var</span> <span class="variable">i</span>;
				<span class="keyword">if</span> (<span class="variable">results</span>[<span class="number integer">0</span>].<span class="variable">addEventListener</span>) {
					<span class="keyword">for</span> (<span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">results</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
						<span class="variable">results</span>[<span class="variable">i</span>].<span class="variable">addEventListener</span>(<span class="variable">evt</span>, <span class="variable">cb</span>, <span class="variable">false</span>);
					}
				}
				<span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">results</span>[<span class="number integer">0</span>].<span class="variable">attachEvent</span>) {
					<span class="keyword">for</span> (<span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">results</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
						<span class="variable">results</span>[<span class="variable">i</span>].<span class="variable">attachEvent</span>(<span class="variable">evt</span>, <span class="variable">cb</span>);
					}
				}
				<span class="keyword">return</span> <span class="this">this</span>;
			},</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<h2>CSS handler extension</h2>

<p>Alter the CSS properties of a list of DOM nodes.</p>

<h2>Usage</h2>

<pre><code>tiramisu.get(*SELECTOR*).css(*CSS_PROPERTIES*)</code></pre>

<p>where <em>SELECTOR</em> is a valid CSS selector and <em>CSS_PROPERTIES</em>
is an object containing the CSS properties to set.</p>

<h2>Example #1 (Set all h1 tags to 34px with color red)</h2>

<pre><code>&lt;h1&gt; This is one headline. &lt;/h1&gt;
&lt;h1&gt; This is another headline. &lt;/h1&gt;
...
tiramisu.get('h1').css({
    'font-size': '12px',
    'color': 'red'
});</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  obj An object containing CSS properties</p><pre><code>     </code></pre></li></ul>
</td>
<td class="code">
<pre><code><span class="string">'css'</span>: <span class="keyword">function</span>(<span class="variable">obj</span>) {
				<span class="keyword">var</span> <span class="variable">i</span>, <span class="variable">key</span>;
				<span class="keyword">for</span> (<span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">results</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
					<span class="keyword">for</span> (<span class="variable">key</span> <span class="keyword">in</span> <span class="variable">obj</span>) {
						<span class="keyword">if</span> (<span class="variable">obj</span>.<span class="variable">hasOwnProperty</span>(<span class="variable">key</span>)) {
							<span class="variable">results</span>[<span class="variable">i</span>].<span class="variable">style</span>.<span class="variable">setProperty</span>(<span class="variable">key</span>, <span class="variable">obj</span>[<span class="variable">key</span>], <span class="string">''</span>); <span class="comment">// The third param is for firefox</span>
						}
					}
				}
				<span class="keyword">return</span> <span class="this">this</span>;
			},</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<h2>HTML extension method</h2>

<p>Gets or sets the HTML Markup of the first CSS
selector element.</p>

<h2>Usage</h2>

<pre><code>tiramisu.get(*SELECTOR*).html([*HTML*])</code></pre>

<p>where <em>SELECTOR</em> is a valid CSS selector and <em>[HTML]</em> is an
optional value to set the element's innerHTML value.</p>

<h2>Example #1 (Getting the HTML value of a div)</h2>

<pre><code>&lt;div id="header"&gt;
  &lt;p&gt; I love pizza! &lt;/p&gt;
&lt;/div&gt;
...
var pizza = tiramisu.get('#header').html()</code></pre>

<p>Example #2 (Setting the HTML value of a div)</p>

<pre><code>&lt;div id="header"&gt;
  &lt;p&gt; I love pizza! &lt;/p&gt;
&lt;/div&gt;
...
tiramisu.get('#header').html('&lt;p&gt; i hate cakes! &lt;/p&gt;');</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  [set] An optional string containing the HTML to replace</p></li><li><p><strong>return</strong>: <em>[String]</em>  An optional string containing the selector's first element HTML value</p><pre><code>     </code></pre></li></ul>
</td>
<td class="code">
<pre><code><span class="string">'html'</span>: <span class="keyword">function</span>(<span class="variable">set</span>) { 

                <span class="keyword">if</span> (<span class="variable">set</span> !== <span class="variable">undefined</span>) {
                    <span class="variable">results</span>[<span class="number integer">0</span>].<span class="variable">innerHTML</span> = <span class="variable">set</span>;
                } <span class="keyword">else</span> {
                    <span class="keyword">return</span> <span class="variable">results</span>[<span class="number integer">0</span>].<span class="variable">innerHTML</span>;    
                }
            },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<h2>Form field value extension method</h2>

<p>Gets or sets the value of a form field of the first CSS Selector
element.</p>

<h2>Usage</h2>

<pre><code>tiramisu.get(*SELECTOR*).value([*VALUE*])</code></pre>

<p>where <em>SELECTOR</em> is a valid CSS selector and <em>[VALUE]</em> is an
optional value to set the element's innerHTML value.</p>

<h2>Example #1 (Get the current value of a select list)</h2>

<pre><code>&lt;form id="myForm" action='#' method="GET"&gt;
  &lt;select&gt;
    &lt;option&gt; Apple &lt;/option&gt;
    &lt;option&gt; Strawberry &lt;/option&gt;
    &lt;option&gt; Banana &lt;/option&gt;
  &lt;/select&gt;
&lt;/form&gt;
...
// The default selected value is “Apple”
var current = t.get('myForm select').value();</code></pre>

<h2>Example #2 (Set the current value of a select list)</h2>

<pre><code>&lt;form id="myForm" action='#' method="GET"&gt;
  &lt;select&gt;
    &lt;option&gt; Apple &lt;/option&gt;
    &lt;option&gt; Strawberry &lt;/option&gt;
    &lt;option&gt; Banana &lt;/option&gt;
  &lt;/select&gt;
&lt;/form&gt;
...
t.get('myForm select').value('Strawberry');

// Now the selected value is “Strawberry”  
var current = t.get('myForm select').value();</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  [set] An optional string containing the field value to set</p></li><li><p><strong>return</strong>: <em>[String]</em>  An optional string containing the selector's first element field value</p><pre><code>     </code></pre></li></ul>
</td>
<td class="code">
<pre><code><span class="string">'value'</span>: <span class="keyword">function</span>(<span class="variable">set</span>) {
                <span class="keyword">if</span> (<span class="variable">set</span> !== <span class="variable">undefined</span>) {
                    <span class="variable">results</span>[<span class="number integer">0</span>].<span class="variable">value</span> = <span class="variable">set</span>; 
                } <span class="keyword">else</span> {
                    <span class="keyword">return</span> <span class="variable">results</span>[<span class="number integer">0</span>].<span class="variable">value</span>;
                }
            },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<h2>Form field src extension method</h2>

<p>Gets or sets the src of an image.</p>

<h2>Usage</h2>

<pre><code>tiramisu.get(*SELECTOR*).src([*VALUE*])</code></pre>

<p>where <em>SELECTOR</em> is a valid CSS selector and <em>[VALUE]</em> is an
optional value to set the element's src value.</p>

<h2>Example #1 (Get the current src of an image)</h2>

<pre><code>&lt;img src="www.example.com/image_num_one.png" id="id_image" /&gt;
...
var current = t.get('#id_image').src();</code></pre>

<h2>Example #2 (Set the current src of an image)</h2>

<pre><code>&lt;img src="www.example.com/image_num_one.png" id="id_image" /&gt;
...
t.get('#id_image').src('www.example.com/image_num_two.png');</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  [set] An optional string containing the field src to set</p></li><li><p><strong>return</strong>: <em>[String]</em>  An optional string containing the selector's first element field src</p><pre><code>     </code></pre></li></ul>
</td>
<td class="code">
<pre><code><span class="string">'src'</span>: <span class="keyword">function</span>(<span class="variable">set</span>) {
                <span class="keyword">if</span> (<span class="variable">set</span> !== <span class="variable">undefined</span>) {
                    <span class="variable">results</span>[<span class="number integer">0</span>].<span class="variable">src</span> = <span class="variable">set</span>; 
                } <span class="keyword">else</span> {
                    <span class="keyword">return</span> <span class="variable">results</span>[<span class="number integer">0</span>].<span class="variable">src</span>;
                }
            }
		};

		<span class="comment">// Append methods to the result object</span>
		(<span class="keyword">function</span> <span class="variable">append_methods</span>() {
			<span class="keyword">var</span> <span class="variable">key</span>;
			<span class="keyword">for</span> (<span class="variable">key</span> <span class="keyword">in</span> <span class="variable">methods</span>) {
				<span class="variable">results</span>[<span class="variable">key</span>] = <span class="variable">methods</span>[<span class="variable">key</span>];
			}
		})();
		<span class="keyword">return</span> <span class="variable">results</span>;
	};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<h1>Framework Ajax Module</h1>

<p>This module is mainly used to perform Ajax requests.</p>

<h2>Usage</h2>

<pre><code>tiramisu.ajax(SETTINGS);</code></pre>

<p>where the <em>SETTINGS</em> object can contain the following:</p>

<ul><li><em>async</em> (default is “true”);</li><li><em>content_type</em> (in POST requests default is “application/x-www-form-urlencoded”);</li><li><em>connection</em>;</li><li><em>error</em> (a callback function);</li><li><em>loader</em>  (a div id);</li><li><em>method</em>  (default is “GET”)</li><li><em>parameter</em>;</li><li><em>success</em> (a callback function);</li><li><em>successHTML</em> (a div id);</li><li><em>url</em> (this is the only <strong>mandatory</strong> field);</li></ul>

<h2>Example #1 (Ajax GET request)</h2>

<pre><code>tiramisu.ajax({
    url : 'http://www.example.com'
});</code></pre>

<h2>Example #2 (Ajax GET request with a success callback)</h2>

<pre><code>tiramisu.ajax({ 
    url : 'http://www.example.com',
    success : function(data) { 
        alert(data);
    }
});</code></pre>

<h2>Example #3 (Ajax GET request loaded into a div with an id)</h2>

<pre><code>tiramisu.ajax({
    url : 'http://www.example.com',
    successHTML : 'responseWrapper'
});</code></pre>

<h2>Example #4 (Ajax POST request displaying a loader)</h2>

<pre><code>tiramisu.ajax({ 
     url: 'www.example.com',
     method : 'POST',
     loader : 'div_loader',
     successHTML : 'responseWrapper'
});</code></pre>

<h2>Example #5 (Ajax POST request with parameters)</h2>

<pre><code>tiramisu.ajax({
    method : 'POST',
    loader : 'div_loader',
    parameter: {
        param_1 : 'variable 1',
        param_2 : 'variable 2'
    },
    url : 'http://www.example.com');
});</code></pre>

<h2>Example #6 (Ajax GET request with success and error callbacks)</h2>

<pre><code>tiramisu.ajax({
    url: 'http://www.example.com',
    success: function() {
        console.log('Ok');
    },
    error: function() {
        console.log('Error');
    }
});</code></pre>

<h2>Example #7 (Ajax POST request with successHTML and success callbacks)</h2>

<pre><code>tiramisu.ajax({
   parameter: {
        param_1 : 'variable 1',
        param_2 : 'variable 2'
    },
   success: function(){ ... },
   successHTML: 'responseWrapper', 
   url : 'http://www.example.com');</code></pre>

<p>   });</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  settings An object containing the Ajax call parameters</p></li><li><p><strong>api</strong>: <em>public</em></p><p> </p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Tiramisu</span>.<span class="variable">prototype</span>.<span class="variable">ajax</span> = <span class="keyword">function</span>(<span class="variable">setting_input</span>) {
		<span class="keyword">var</span> <span class="variable">setting_input</span> = <span class="variable">setting_input</span> || {},
            <span class="variable">setting</span> = {
				<span class="variable">async</span>: <span class="variable">true</span>,
				<span class="variable">content_type</span>: <span class="string">''</span>,
				<span class="variable">connection</span>: <span class="string">''</span>,
				<span class="variable">error</span>: <span class="keyword">function</span>(<span class="variable">res</span>) { <span class="variable">console</span>.<span class="variable">log</span>(<span class="variable">res</span>) },
				<span class="variable">loader</span>: <span class="string">''</span>,
                <span class="variable">method</span>: <span class="string">'GET'</span>,
				<span class="variable">parameter</span>: <span class="string">''</span>,
                <span class="variable">success</span>: <span class="keyword">function</span>() {},
                <span class="variable">successHTML</span>: <span class="string">''</span>,
				<span class="variable">url</span>: <span class="string">''</span>
            },
            <span class="variable">xhr</span> = <span class="keyword">null</span>,
            <span class="variable">parameter</span> = <span class="string">''</span>, <span class="comment">// Is very important that parameter dafualt value is ''</span>
            <span class="variable">parameter_count</span> = <span class="number integer">0</span>;

		<span class="keyword">if</span> (<span class="variable">window</span>.<span class="class">XMLHttpRequest</span>) {
			<span class="variable">xhr</span> = <span class="keyword">new</span> <span class="class">XMLHttpRequest</span>();
		} <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">window</span>.<span class="class">ActiveXObject</span>) {
			<span class="variable">xhr</span> = <span class="keyword">new</span> <span class="class">ActiveXObject</span>(&<span class="variable">quot</span>;<span class="class">Microsoft</span>.<span class="class">XMLHTTP</span>&<span class="variable">quot</span>;);
		} <span class="keyword">else</span> {
			<span class="variable">console</span>.<span class="variable">log</span>(<span class="string">'Object Ajax Error!'</span>);
		}

		<span class="variable">extend</span>(<span class="variable">setting</span>, <span class="variable">setting_input</span>);

		<span class="keyword">if</span> (<span class="variable">tiramisu</span>.<span class="variable">detect</span>(<span class="string">'isIEolder'</span>)) {
			<span class="variable">setting</span>.<span class="variable">method</span> = <span class="string">'POST'</span>;
		}
		<span class="comment">// object &quot;setting.parameter&quot; I create a string with the parameters </span>
		<span class="comment">// to be passed in request</span>
		<span class="keyword">if</span> (<span class="variable">setting</span>.<span class="variable">parameter</span> != <span class="string">''</span>) {
            <span class="keyword">for</span> (<span class="variable">attrname</span> <span class="keyword">in</span> <span class="variable">setting</span>.<span class="variable">parameter</span>) { 
                <span class="variable">parameter</span> += <span class="variable">attrname</span>+<span class="string">'='</span>+<span class="variable">setting</span>.<span class="variable">parameter</span>[<span class="variable">attrname</span>]+<span class="string">'&amp;'</span>;
            }
            <span class="variable">parameter</span> = <span class="variable">parameter</span>.<span class="variable">substring</span>(<span class="number integer">0</span>, <span class="variable">parameter</span>.<span class="variable">length</span> - <span class="number integer">1</span>);
            <span class="keyword">if</span> (!<span class="variable">setting</span>.<span class="variable">content_type</span>) {
				<span class="variable">setting</span>.<span class="variable">content_type</span> = <span class="string">'application/x-www-form-urlencoded'</span>;
			}
			<span class="variable">setting</span>.<span class="variable">method</span> = <span class="string">'POST'</span>;
        } <span class="keyword">else</span>{
            <span class="variable">parameter</span> = <span class="keyword">null</span>;
        }
		
		<span class="comment">// The open() method!</span>
		<span class="comment">// When the open(method, url, async, user, password) method is invoked, the </span>
		<span class="comment">// user agent must run these steps (unless otherwise indicated):</span>
		<span class="comment">// 1) If the XMLHttpRequest object has an associated XMLHttpRequest Document;</span>
		<span class="comment">// 2) If method is a case-insensitive match for CONNECT, DELETE, GET, HEAD, </span>
		<span class="comment">//    OPTIONS, POST, PUT, TRACE;</span>
		<span class="comment">// 3) Let url be a URL;</span>
		<span class="comment">// 4) Let async be the value of the async argument or true if it was omitted;</span>
		<span class="comment">// 5) Abort the send() algorithm;</span>
		<span class="comment">// 6) If there are any tasks from the object's XMLHttpRequest task source in </span>
		<span class="comment">//    one of the task queues, then remove those tasks.</span>
		<span class="comment">// 7) Set variables associated with the object as follows:</span>
		<span class="comment">//		- Set the send() flag to false;</span>
		<span class="comment">//		- Set response entity body to null;</span>
		<span class="comment">//		- Empty the list of author request headers;</span>
		<span class="comment">//		- Set method, url, temp user, temp password, value of async.</span>
		<span class="comment">// 8) Switch the the state to OPENED;</span>
		<span class="comment">// 9) Dispatch a readystatechange event.</span>
		<span class="comment">//</span>
		<span class="variable">xhr</span>.<span class="variable">open</span>(<span class="variable">setting</span>.<span class="variable">method</span>, <span class="variable">setting</span>.<span class="variable">url</span>, <span class="variable">setting</span>.<span class="variable">async</span>);
		
		<span class="comment">// The setRequestHeader() method!</span>
		<span class="comment">// When the setRequestHeader(header, value) method is invoked, </span>
		<span class="comment">// the user agent must run these steps:</span>
		<span class="comment">// 1) If the state is not OPENED raise an INVALID_STATE_ERR exception </span>
		<span class="comment">//    and terminate these steps;</span>
		<span class="comment">// 2) If the send() flag is true raise an INVALID_STATE_ERR exception </span>
		<span class="comment">//    and terminate these steps;</span>
		<span class="comment">// 3) Terminate these steps if header is a case-insensitive match for </span>
		<span class="comment">//    one of the following headers: </span>
		<span class="comment">//    Accept-Charset, Accept-Encoding, Connection, Content-Length, Cookie,</span>
		<span class="comment">//	  Cookie2, Content-Transfer-Encoding, Date, Expect, Host, Keep-Alive,</span>
		<span class="comment">//    Referer, TE, Trailer, Transfer-Encoding, Upgrade, User-Agent, Via.</span>
		<span class="comment">//</span>
		<span class="keyword">if</span> (<span class="variable">setting</span>.<span class="variable">content_type</span>) {
			<span class="variable">xhr</span>.<span class="variable">setRequestHeader</span>(<span class="string">'Content-type'</span>, <span class="variable">setting</span>.<span class="variable">content_type</span>);
		}

		<span class="keyword">if</span> (<span class="variable">setting</span>.<span class="variable">connection</span>) {
			<span class="variable">xhr</span>.<span class="variable">setRequestHeader</span>(<span class="string">'Connection'</span>, <span class="variable">setting</span>.<span class="variable">connection</span>);
		}

		<span class="variable">xhr</span>.<span class="variable">onreadystatechange</span> = <span class="keyword">function</span>() {
			<span class="keyword">if</span> (<span class="variable">xhr</span>.<span class="variable">readyState</span> == <span class="number integer">4</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">xhr</span>.<span class="variable">status</span> == <span class="number integer">200</span>) {
				<span class="comment">// success!</span>
				<span class="keyword">if</span> (<span class="variable">setting</span>.<span class="variable">successHTML</span>) {
					<span class="variable">tiramisu</span>.<span class="variable">d</span>.<span class="variable">getElementById</span>(<span class="variable">setting</span>.<span class="variable">successHTML</span>).<span class="variable">innerHTML</span> = <span class="variable">xhr</span>.<span class="variable">responseText</span>;
				}
				<span class="variable">setting</span>.<span class="variable">success</span>(<span class="variable">xhr</span>.<span class="variable">responseText</span>);
			} <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">xhr</span>.<span class="variable">readyState</span> == <span class="number integer">4</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">xhr</span>.<span class="variable">status</span> == <span class="number integer">400</span>) {
				<span class="comment">// 400 Bad Request</span>
				<span class="variable">setting</span>.<span class="variable">error</span>(<span class="string">'400 Bad Request'</span>);
			} <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">xhr</span>.<span class="variable">readyState</span> == <span class="number integer">4</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">xhr</span>.<span class="variable">status</span> != <span class="number integer">200</span>) {
				<span class="comment">// fetched the wrong page or network error...</span>
			    <span class="variable">setting</span>.<span class="variable">error</span>(<span class="string">'Fetched the wrong page or network error'</span>);
			}
		};
		
		<span class="comment">// The send() method!</span>
		<span class="comment">// When the send(data) method is invoked, the user agent must run the following steps </span>
		<span class="comment">// (unless otherwise noted). This algorithm gets aborted when the open() or abort() method </span>
		<span class="comment">// is invoked. When the send() algorithm is aborted the user agent must terminate the </span>
		<span class="comment">// algorithm after finishing the step it is on.</span>
		<span class="comment">// 1) If the state is not OPENED raise an INVALID_STATE_ERR exception and terminate </span>
		<span class="comment">//    these steps.</span>
		<span class="comment">// 2) If the send() flag is true raise an INVALID_STATE_ERR exception and terminate these steps.</span>
		<span class="comment">// 3) If the request method is a case-sensitive match for GET or HEAD act as if data is null.</span>
		<span class="comment">//    If the data argument has been omitted or is null, do not include a request entity body </span>
		<span class="comment">//    and go to the next step.</span>
		<span class="comment">//    If a Content-Type header is set using setRequestHeader() whose value is a valid MIME type </span>
		<span class="comment">//    and has a charset parameter whose value is not a case-insensitive match for encoding, </span>
		<span class="comment">//    and encoding is not null, set all the charset parameters of the Content-Type header to encoding.</span>
		<span class="comment">//    If no Content-Type header has been set using setRequestHeader() and mime type is not null set a </span>
		<span class="comment">//    Content-Type request header with as value mime type.</span>
		<span class="comment">// 4) If the asynchronous flag is false release the storage mutex.</span>
		<span class="comment">// 5) Set the error flag to false.</span>
		<span class="comment">//</span>
		<span class="variable">xhr</span>.<span class="variable">send</span>(<span class="variable">parameter</span>);
		<span class="keyword">return</span> <span class="this">this</span>;
	};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<h1>Task Engine Module</h1>

<p>This module is used to perform a function at a particular amount of time 
or perform the same function several times in that time frame.</p>

<h2>Usage</h2>

<pre><code>tiramisu.task(delay, [interval], callback);</code></pre>

<p>where “interval” is an optional argument</p>

<h2>Example #1 (The callback is executed after 2000 ms)</h2>

<pre><code>tiramisu.task(2000, callback)</code></pre>

<h2>Example #2 (The callback is executed every 100 ms in a period of 2000ms)</h2>

<pre><code>tiramisu.task(2000, 100, callback)</code></pre>

<h2>Example #3 (The callback is executed every 500 ms in loop.)</h2>

<pre><code>tiramisu.task('loop', 500, callback)</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>integer</em>  delay The total task delay(ms)</p></li><li><p><strong>param</strong>: <em>integer</em>  [interval] The interval of the repetitions(ms)</p></li><li><p><strong>param</strong>: <em>Function</em>  cb The callback function</p><p> </p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Tiramisu</span>.<span class="variable">prototype</span>[<span class="string">'task'</span>] = <span class="keyword">function</span>(<span class="variable">delay</span>, <span class="variable">cb</span>) {
		<span class="keyword">var</span> <span class="variable">interval</span>,
			<span class="variable">requestAnimFrame</span> = <span class="variable">tiramisu</span>.<span class="variable">requestAnimFrame</span>;

		<span class="keyword">if</span> (<span class="variable">arguments</span>.<span class="variable">length</span> &<span class="variable">gt</span>; <span class="number integer">2</span>) {
			<span class="variable">interval</span> = <span class="variable">arguments</span>[<span class="number integer">1</span>];
			<span class="variable">cb</span> = <span class="variable">arguments</span>[<span class="variable">arguments</span>.<span class="variable">length</span> - <span class="number integer">1</span>];
		}

		<span class="keyword">var</span> <span class="variable">start</span> = + <span class="keyword">new</span> <span class="class">Date</span>(),
			<span class="variable">pass</span> = <span class="variable">interval</span>;

		<span class="keyword">function</span> <span class="variable">animate</span>() {
			<span class="keyword">var</span> <span class="variable">progress</span> = + <span class="keyword">new</span> <span class="class">Date</span>() - <span class="variable">start</span>;

			<span class="keyword">if</span> (<span class="variable">interval</span> !== <span class="variable">undefined</span>) {
				<span class="keyword">if</span> (<span class="variable">progress</span> &<span class="variable">gt</span>; <span class="variable">pass</span>) {
					<span class="variable">pass</span> += <span class="variable">interval</span>;
					<span class="variable">cb</span>();
				}
			}

            <span class="comment">// The recursion continues only in two cases:</span>
            <span class="comment">// - The elapsed time is less than the total time;</span>
            <span class="comment">// - The total time is infinite (so a loop) but there </span>
            <span class="comment">//   is an interval of time between repetitions of the callback.</span>
            <span class="keyword">if</span> (<span class="variable">progress</span> &<span class="variable">lt</span>; <span class="variable">delay</span> || (<span class="variable">delay</span> == <span class="string">'loop'</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">interval</span> !== <span class="variable">undefined</span>)) {
				<span class="variable">requestAnimFrame</span>(<span class="variable">animate</span>);
			} <span class="keyword">else</span> {
				<span class="keyword">if</span> (<span class="variable">interval</span> === <span class="variable">undefined</span>) {
					<span class="variable">cb</span>();
				}
			}
		}
		<span class="variable">animate</span>();
	};
})(<span class="variable">window</span>);
</code></pre>
</td>
</tr>	</body>
</html></tbody></table>